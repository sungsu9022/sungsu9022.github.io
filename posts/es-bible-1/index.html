<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="[엘라스틱서치 바이블] 1. 엘라스틱 서치 소개" /><meta name="author" content="sungsu park" /><meta property="og:locale" content="en" /><meta name="description" content="1. 엘라스틱 서치 소개 Elasticsearch는 2010년 2월 샤이 베논이 아파치의 루씬 라이브러리를 기반으로 만든 분산 검색 엔진 2013년에 데이터를 손쉽게 시각화하는 Kibana와 색인 데이터 수집&amp;변환을 하는 Logstash 프로젝트에 엘라스틱에 합류 엘라스틱서치는 현재 검색 엔진 분야에서 가장 각광받고 있는 시스템이다. 분산처리나 고가용성, 수평적 확장성 등 엔터프라이즈 영역에 필요한 주요 기능을 제공하고 있으며, 이러한 요소들의 효용성이 많은 기업 사용자에 의해 다년간 충분히 검증되었다. 엘라스틱서치는 JSON 기반의 문ㅅ를 저장, 색인, 검색하기에 분산 NoSQL 스토리지의 성격을 가지고 있다." /><meta property="og:description" content="1. 엘라스틱 서치 소개 Elasticsearch는 2010년 2월 샤이 베논이 아파치의 루씬 라이브러리를 기반으로 만든 분산 검색 엔진 2013년에 데이터를 손쉽게 시각화하는 Kibana와 색인 데이터 수집&amp;변환을 하는 Logstash 프로젝트에 엘라스틱에 합류 엘라스틱서치는 현재 검색 엔진 분야에서 가장 각광받고 있는 시스템이다. 분산처리나 고가용성, 수평적 확장성 등 엔터프라이즈 영역에 필요한 주요 기능을 제공하고 있으며, 이러한 요소들의 효용성이 많은 기업 사용자에 의해 다년간 충분히 검증되었다. 엘라스틱서치는 JSON 기반의 문ㅅ를 저장, 색인, 검색하기에 분산 NoSQL 스토리지의 성격을 가지고 있다." /><link rel="canonical" href="https://sungsu9022.github.io/posts/es-bible-1/" /><meta property="og:url" content="https://sungsu9022.github.io/posts/es-bible-1/" /><meta property="og:site_name" content="Sungsu’s Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-11-16T18:44:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[엘라스틱서치 바이블] 1. 엘라스틱 서치 소개" /><meta name="twitter:site" content="@sungsu9022dev" /><meta name="twitter:creator" content="@sungsu park" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"sungsu park"},"dateModified":"2023-11-16T18:44:00+09:00","datePublished":"2023-11-16T18:44:00+09:00","description":"1. 엘라스틱 서치 소개 Elasticsearch는 2010년 2월 샤이 베논이 아파치의 루씬 라이브러리를 기반으로 만든 분산 검색 엔진 2013년에 데이터를 손쉽게 시각화하는 Kibana와 색인 데이터 수집&amp;변환을 하는 Logstash 프로젝트에 엘라스틱에 합류 엘라스틱서치는 현재 검색 엔진 분야에서 가장 각광받고 있는 시스템이다. 분산처리나 고가용성, 수평적 확장성 등 엔터프라이즈 영역에 필요한 주요 기능을 제공하고 있으며, 이러한 요소들의 효용성이 많은 기업 사용자에 의해 다년간 충분히 검증되었다. 엘라스틱서치는 JSON 기반의 문ㅅ를 저장, 색인, 검색하기에 분산 NoSQL 스토리지의 성격을 가지고 있다.","headline":"[엘라스틱서치 바이블] 1. 엘라스틱 서치 소개","mainEntityOfPage":{"@type":"WebPage","@id":"https://sungsu9022.github.io/posts/es-bible-1/"},"url":"https://sungsu9022.github.io/posts/es-bible-1/"}</script><title>[엘라스틱서치 바이블] 1. 엘라스틱 서치 소개 | Sungsu's Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Sungsu's Tech Blog"><meta name="application-name" content="Sungsu's Tech Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/personal/sunny.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Sungsu's Tech Blog</a></div><div class="site-subtitle font-italic">Java/Kotlin Spring, Back-end</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/sungsu9022" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/sungsu9022dev" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['sungsu9022','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[엘라스틱서치 바이블] 1. 엘라스틱 서치 소개</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>[엘라스틱서치 바이블] 1. 엘라스틱 서치 소개</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1700127840" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 16, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1857 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="1-엘라스틱-서치-소개">1. 엘라스틱 서치 소개</h1><ul><li>Elasticsearch는 2010년 2월 샤이 베논이 아파치의 루씬 라이브러리를 기반으로 만든 분산 검색 엔진<li>2013년에 데이터를 손쉽게 시각화하는 Kibana와 색인 데이터 수집&amp;변환을 하는 Logstash 프로젝트에 엘라스틱에 합류<li>엘라스틱서치는 현재 검색 엔진 분야에서 가장 각광받고 있는 시스템이다. 분산처리나 고가용성, 수평적 확장성 등 엔터프라이즈 영역에 필요한 주요 기능을 제공하고 있으며, 이러한 요소들의 효용성이 많은 기업 사용자에 의해 다년간 충분히 검증되었다.<li>엘라스틱서치는 JSON 기반의 문ㅅ를 저장, 색인, 검색하기에 분산 NoSQL 스토리지의 성격을 가지고 있다.</ul><h2 id="11-엘라스틱서치의-기본-콘셉트"><span class="mr-2">1.1 엘라스틱서치의 기본 콘셉트</span><a href="#11-엘라스틱서치의-기본-콘셉트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>루씬은 데이터를 색인하고 검색하는 기능을 제공하는 검색엔진의 코어 라이브러리이다.</ul><h3 id="검색-엔진"><span class="mr-2">검색 엔진</span><a href="#검색-엔진" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>엘라스틱서치는 기본적으로 검색엔진이다.<li>다른 RDBMS나 경쟁 NoSQL에 비해 매우 강력한 검색 기능을 지원한다.<li>단순한 텍스트 매칭 검색이 아닌 본격적인 전문 검색(full-text search)이 가능하고, 다양한 종류의 검색 쿼리를 지원하다.<li>역색인을 사용하여 검색 속도도 매우 빠르다.<li>다양한 analzyer)를 조합하여 여러 비즈니스 요구사항에 맞는 색인을 구성할수 있고, 형태소 분석도 가능하다.</ul><h3 id="분산-처리"><span class="mr-2">분산 처리</span><a href="#분산-처리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>데이터를 여러 노드에 분산 저장하며 검색이나 집계 작업 등을 수행할 때도 분산 처리를 지원한다.</ul><h3 id="고가용성-제공"><span class="mr-2">고가용성 제공</span><a href="#고가용성-제공" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>클러스터를 구성하고 있는 일부 노드에 장애가 발생해도 복제본 데이터를 이용해 중단 없이 서비스를 지속할 수 있다.<li>장애 상황에서 엘라스틱 서치는 다시 복제본을 만들어 복제본 개수를 유지하면서 노드 간 데이터의 균형을 자동으로 맞춘다.</ul><h3 id="수평적-확장성"><span class="mr-2">수평적 확장성</span><a href="#수평적-확장성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>요청 수나 데이터의 양 증가에 따라 더 많은 처리 능력이 요구되는 때가 생기는데, 엘라스틱서치는 이런 상황을 대비하여 수평적 확장을 지원한다.</ul><h3 id="json-기반의-rest-api-제공"><span class="mr-2">JSON 기반의 REST API 제공</span><a href="#json-기반의-rest-api-제공" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>JSON 형태의 문서를 저장, 색인, 검색한다.<li>특별한 클라이언트 라이브러리 사전 설치 없이 환경에 구애받지 않고 HTTP API를 통해 쉽게 이용 가능하다.</ul><h3 id="데이터-안정성"><span class="mr-2">데이터 안정성</span><a href="#데이터-안정성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>높은 데이터 안정성을 제공한다.<li>데이터 색인 요청 후 200 OK를 받았다면 그 데이터는 확실히 디스크에 기록됨을 보장한다.</ul><h3 id="다양한-플러그인을-통한-기능-확장-지원"><span class="mr-2">다양한 플러그인을 통한 기능 확장 지원</span><a href="#다양한-플러그인을-통한-기능-확장-지원" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>다양한 플러그인을 사용해 기능을 확장하고 변경할수 있다.<li>또, 핵심적적인 기능들도 플러그인을 통해 제어할수 있도록 설계됐다.</ul><h3 id="준실시간-검색"><span class="mr-2">준실시간 검색</span><a href="#준실시간-검색" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>엘라스틱서치는 준실시간 검색(near real-time search)을 지원한다.<li>데이터를 색인하자마자 조회하는 것은 가능하지만, 색인 직후의 검색 요청은 성공하지 못할 가능성이 높다.<li>기본 설정 운영시 최대 1초 정도 지연시간이 발생한다.</ul><h3 id="트랜잭션이-지원되지-않음"><span class="mr-2">트랜잭션이 지원되지 않음.</span><a href="#트랜잭션이-지원되지-않음" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>일반적인 RDBMS와는 다르게 트랜잭션을 지원하지 않는다.<li>서비스와 데이터 설계시 이 점을 고려해야 한다.</ul><h3 id="사실상-조인을-지원하지-않음"><span class="mr-2">사실상 조인을 지원하지 않음.</span><a href="#사실상-조인을-지원하지-않음" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>기본적으로 조인을 염두에 두고 설계되지 않았다.<li><code class="language-plaintext highlighter-rouge">join</code> 이라는 특별한 데이터 타입이 있지만, 이는 굉장히 제한적인 상황을 위한 기능이고, 성능도 떨어진다.<li>설계시 RDBMS와는 다르게 데이터를 비정규화하고, 가급적 조인을 아예 사용할수 없다고 가정하여 설계를 해야 한다.</ul><h2 id="12-라이선스-정책"><span class="mr-2">1.2 라이선스 정책</span><a href="#12-라이선스-정책" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>엘라스틱 라이선스와 SSPL(Server Side Public License)라는 2가지 라이선스 정책을 채택한다.<li>github에 공개되는 소스코드는 사용자가 원하는 라이선스 정책을 선택해 사용할 수 있다.</ul><p><a href="https://github.com/sungsu9022/study/assets/6982740/b810c31f-fd3e-411e-bff5-1528fa2a357f" class="popup img-link "><img width="755" alt="스크린샷 2023-11-18 오후 4 31 02" data-src="https://github.com/sungsu9022/study/assets/6982740/b810c31f-fd3e-411e-bff5-1528fa2a357f" class="lazyload" data-proofer-ignore></a></p><ul><li>SSPL은 소스코드에 비롯된 파생작업을 만드는 경우 파생 작업물도 SSPL 라이선스로 공개해야 하는 카피레프트 성격의 라이선스이다. (상업 서비스에서 SSPL 라이선스로 소스코드를 이요하려면 사전검토가 필요하다.)<li>특수한 사정이 있는 경우 7.10 버전 이하의 구버전을 선택하는 방법도 고려해볼만 하다.<li>AWS OpenSearch 배포판을 선택하는 방법도 있다.</ul><h2 id="13-실습환경-구축"><span class="mr-2">1.3 실습환경 구축</span><a href="#13-실습환경-구축" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>실습을 위해 elasticsearch와 kibana를 설치해보자.<li>책에서는 OS 환경별로 직접 app 설치하는 방법으로 정의되어있으나, 편의상 docker-compose를 이용해서 띄우는 방식으로 환경 구축을 진행합니다.</ul><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
</pre><td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.7'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">es01</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">docker.elastic.co/elasticsearch/elasticsearch:8.5.2</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">es01</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">node.name=es01</span>
      <span class="pi">-</span> <span class="s">cluster.name=es-docker-cluster</span>
      <span class="pi">-</span> <span class="s">discovery.seed_hosts=es02,es03</span>
      <span class="pi">-</span> <span class="s">cluster.initial_master_nodes=es01,es02,es03</span>
      <span class="pi">-</span> <span class="s">bootstrap.memory_lock=true</span>
      <span class="pi">-</span> <span class="s">xpack.security.enabled=false</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">ES_JAVA_OPTS=-Xms512m</span><span class="nv"> </span><span class="s">-Xmx512m"</span>
    <span class="na">ulimits</span><span class="pi">:</span>
      <span class="na">memlock</span><span class="pi">:</span>
        <span class="na">soft</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">hard</span><span class="pi">:</span> <span class="s">-1</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">data01:/Users/sungsupark/dev/personal/kotlin-spring-multi-module-starter/db/elasticsearch/starter/data</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">9200:9200</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">internal-network</span>
  <span class="na">es02</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">docker.elastic.co/elasticsearch/elasticsearch:8.5.2</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">es02</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">node.name=es02</span>
      <span class="pi">-</span> <span class="s">cluster.name=es-docker-cluster</span>
      <span class="pi">-</span> <span class="s">discovery.seed_hosts=es01,es03</span>
      <span class="pi">-</span> <span class="s">cluster.initial_master_nodes=es01,es02,es03</span>
      <span class="pi">-</span> <span class="s">bootstrap.memory_lock=true</span>
      <span class="pi">-</span> <span class="s">xpack.security.enabled=false</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">ES_JAVA_OPTS=-Xms512m</span><span class="nv"> </span><span class="s">-Xmx512m"</span>
    <span class="na">ulimits</span><span class="pi">:</span>
      <span class="na">memlock</span><span class="pi">:</span>
        <span class="na">soft</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">hard</span><span class="pi">:</span> <span class="s">-1</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">data02:/Users/sungsupark/dev/personal/kotlin-spring-multi-module-starter/db/elasticsearch/starter/data</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">internal-network</span>
  <span class="na">es03</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">docker.elastic.co/elasticsearch/elasticsearch:8.5.2</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">es03</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">node.name=es03</span>
      <span class="pi">-</span> <span class="s">cluster.name=es-docker-cluster</span>
      <span class="pi">-</span> <span class="s">discovery.seed_hosts=es01,es02</span>
      <span class="pi">-</span> <span class="s">cluster.initial_master_nodes=es01,es02,es03</span>
      <span class="pi">-</span> <span class="s">bootstrap.memory_lock=true</span>
      <span class="pi">-</span> <span class="s">xpack.security.enabled=false</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">ES_JAVA_OPTS=-Xms512m</span><span class="nv"> </span><span class="s">-Xmx512m"</span>
    <span class="na">ulimits</span><span class="pi">:</span>
      <span class="na">memlock</span><span class="pi">:</span>
        <span class="na">soft</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">hard</span><span class="pi">:</span> <span class="s">-1</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">data03:/Users/sungsupark/dev/personal/kotlin-spring-multi-module-starter/db/elasticsearch/starter/data</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">internal-network</span>
  <span class="na">kibana</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">docker.elastic.co/kibana/kibana:8.5.2</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">kibana</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">5601:5601</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">ELASTICSEARCH_URL</span><span class="pi">:</span> <span class="s">http://es01:9200</span>
      <span class="na">ELASTICSEARCH_HOSTS</span><span class="pi">:</span> <span class="s">http://es01:9200</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">internal-network</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">es01</span>
  <span class="na">cerebro</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">lmenezes/cerebro:0.9.4</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">cerebro</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">CEREBRO_PORT=8080</span>
      <span class="pi">-</span> <span class="s">ELASTICSEARCH_HOSTS=http://es01:9200</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">internal-network</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">es01</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">data01</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">local</span>
  <span class="na">data02</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">local</span>
  <span class="na">data03</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">local</span>

<span class="na">networks</span><span class="pi">:</span>
  <span class="na">internal-network</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
</pre></table></code></div></div><ul><li>개인 로컬 개발환경에서는 프로젝트 경로에 <code class="language-plaintext highlighter-rouge">.gitignore</code> 처리되어있는 <code class="language-plaintext highlighter-rouge">${project}/db/~</code> 하위로 es 볼륨을 정의했습니다.<li><code class="language-plaintext highlighter-rouge">- xpack.security.enabled=false </code> 이 옵션은 배포 환경에서는 빠져야하는데 es8부터 해당 옵션이 빠지면 es 컨테이너 구동이 되지 않아 추가됨.</ul><h3 id="131-es"><span class="mr-2">1.3.1 ES</span><a href="#131-es" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://github.com/sungsu9022/study/assets/6982740/aadfd6d2-ba6a-4370-b84c-48cc874075bd" class="popup img-link "><img width="742" alt="스크린샷 2023-11-18 오후 5 32 24" data-src="https://github.com/sungsu9022/study/assets/6982740/aadfd6d2-ba6a-4370-b84c-48cc874075bd" class="lazyload" data-proofer-ignore></a></p><h3 id="132-kibana"><span class="mr-2">1.3.2 Kibana</span><a href="#132-kibana" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>키바나는 ES와 함께 엘라스틱에서 배포하고 있는 스택의 일원으로 데이터를 효과적으로 시각화하는 솔루션이다.</ul><p><a href="https://github.com/sungsu9022/study/assets/6982740/2fd5f42b-05f8-42b1-891b-5093322ace8a" class="popup img-link "><img width="1350" alt="스크린샷 2023-11-18 오후 5 32 49" data-src="https://github.com/sungsu9022/study/assets/6982740/2fd5f42b-05f8-42b1-891b-5093322ace8a" class="lazyload" data-proofer-ignore></a></p><ul><li>샘플 데이터 추가<ul><li><code class="language-plaintext highlighter-rouge">Home &gt; Try sample data &gt; Other sample data sets &gt; Add data</code></ul></ul><h3 id="133-cerebro"><span class="mr-2">1.3.3 Cerebro</span><a href="#133-cerebro" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>ES 클러스터의 상태 화인과 관리를 도와주는 서드파티 솔루션이다.</ul><p><a href="https://github.com/sungsu9022/study/assets/6982740/57c5b348-c29c-4c4a-93fc-28739ccb1fa1" class="popup img-link "><img width="1425" alt="스크린샷 2023-11-18 오후 5 33 17" data-src="https://github.com/sungsu9022/study/assets/6982740/57c5b348-c29c-4c4a-93fc-28739ccb1fa1" class="lazyload" data-proofer-ignore></a></p><h2 id="reference"><span class="mr-2">Reference</span><a href="#reference" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://velog.io/@limsubin/elasticsearch-Single-kibana-cerebro-%EB%A5%BC-Docker%EB%A1%9C-%EC%98%AC%EB%A0%A4%EB%B3%B4%EC%9E%90">ES docker-compose</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devlog/'>DevLog</a>, <a href='/categories/elasticsearch/'>Elasticsearch</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/elasticsearch/" class="post-tag no-text-decoration" >Elasticsearch</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%EC%84%9C%EC%B9%98%20%EB%B0%94%EC%9D%B4%EB%B8%94]%201.%20%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%20%EC%84%9C%EC%B9%98%20%EC%86%8C%EA%B0%9C%20-%20Sungsu's%20Tech%20Blog&url=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fes-bible-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%EC%84%9C%EC%B9%98%20%EB%B0%94%EC%9D%B4%EB%B8%94]%201.%20%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%20%EC%84%9C%EC%B9%98%20%EC%86%8C%EA%B0%9C%20-%20Sungsu's%20Tech%20Blog&u=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fes-bible-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fes-bible-1%2F&text=[%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%EC%84%9C%EC%B9%98%20%EB%B0%94%EC%9D%B4%EB%B8%94]%201.%20%EC%97%98%EB%9D%BC%EC%8A%A4%ED%8B%B1%20%EC%84%9C%EC%B9%98%20%EC%86%8C%EA%B0%9C%20-%20Sungsu's%20Tech%20Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/es-bible-4-3/">[엘라스틱서치 바이블] 4. 데이터 다루기 -3(ES Client 라이브러리)</a><li><a href="/posts/es-bible-4-2/">[엘라스틱서치 바이블] 4. 데이터 다루기 -2(집계)</a><li><a href="/posts/es-bible-2/">[엘라스틱서치 바이블] 2. 엘라스틱 서치 기본 동작과 구조</a><li><a href="/posts/es-bible-3-1/">[엘라스틱서치 바이블] 3. 인덱스 설계 - 1</a><li><a href="/posts/spark-guide-6/">[스파크 완벽 가이드] 6. 다양한 데이터 타입 다루기</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/kubernetes-in-action/">kubernetes-in-action</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/elasticsearch/">Elasticsearch</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/hands-on-reactive-programming-in-spring-5/">Hands-On Reactive Programming in Spring 5</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/es-bible-2/"><div class="card-body"> <em class="small" data-ts="1700218920" data-df="ll" > Nov 17, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[엘라스틱서치 바이블] 2. 엘라스틱 서치 기본 동작과 구조</h3><div class="text-muted small"><p> 2. 엘라스틱 서치 기본 동작과 구조 엘라스틱서치의 구조를 어느정도 먼저 이해한 상태에서 상세 내용을 학습해야 전체 학습에 깊이가 생긴다. 이번 장을 마치고 나면 엘라스틱서치가 어떻게 동작하는지 큰 그림을 머릿속에 그릴수 있을것이다. 2.1 엘라스틱서치 기본 동작 빠르게 둘러보기 실습 과정에서는 기본적으로 REST API를 호출해 진...</p></div></div></a></div><div class="card"> <a href="/posts/es-bible-3-1/"><div class="card-body"> <em class="small" data-ts="1700301000" data-df="ll" > Nov 18, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[엘라스틱서치 바이블] 3. 인덱스 설계 - 1</h3><div class="text-muted small"><p> 3. 인덱스 설계 - 1 ES의 인덱스는 아주 세부적인 부분까지 설정으로 제어할 수 있다. 이 설정에 따라 동작과 특성이 매우 달라지므로 인덱스 설계에 신경써야 한다. 맵핑, 필드 타입, 애널라이저 등 핵심적인 설정을 학습해 ES 인덱스에 대한 이해도를 높여보자. 3.1 인덱스 설정 인덱스 생성시 동작에 관한 설정을 지정할 수 있...</p></div></div></a></div><div class="card"> <a href="/posts/es-bible-3-2/"><div class="card-body"> <em class="small" data-ts="1702034160" data-df="ll" > Dec 8, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[엘라스틱서치 바이블] 3. 인덱스 설계 -2</h3><div class="text-muted small"><p> 3. 인덱스 설계 -2 3.3 애널라이저와 토크나이저 이전장을 통해 text 필드의 데이터는 애널라이저를 통해 분석돼 여러 텀으로 쪼개져 색인된다는것을 배웠다. 구체적으로 애널라이저가 동작하는 과정과 ES가 자체적으로 제공하는 빌트인 애널라이저를 사용해보고 특정 상황에 맞는 커스텀 애널라이저를 적용하는 방법을 살펴보자. 애널라이저는 0개...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/spark-guide-19/" class="btn btn-outline-primary" prompt="Older"><p>[스파크 완벽 가이드] 19. 성능 튜닝</p></a> <a href="/posts/es-bible-2/" class="btn btn-outline-primary" prompt="Newer"><p>[엘라스틱서치 바이블] 2. 엘라스틱 서치 기본 동작과 구조</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://sungsu9022.github.io/posts/es-bible-1/'; this.page.identifier = '/posts/es-bible-1/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://sungsu-parks-tech-blog.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] } ); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } if (document.querySelector('.mode-toggle')) { window.addEventListener('message', reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/kubernetes-in-action/">kubernetes-in-action</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/elasticsearch/">Elasticsearch</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/hands-on-reactive-programming-in-spring-5/">Hands-On Reactive Programming in Spring 5</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/sungsu9022dev">sungsu9022</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-145894105-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-145894105-1'); }); </script>
