<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="[kubernetes-in-action] 5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨." /><meta name="author" content="sungsu park" /><meta property="og:locale" content="en" /><meta name="description" content="5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨. νλ“κ°€ λ‹¤λ¥Έ νλ“μ—κ² μ κ³µν•λ” μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ λ‹¤λ¥Έ νλ“λ¥Ό μ°Ύλ” λ°©λ²•μ΄ ν•„μ”ν•λ‹¤. μΏ λ²„λ„¤ν‹°μ¤μ—μ„λ” μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” μ„λ²„μ μ •ν™•ν• IP μ£Όμ†λ‚ νΈμ¤νΈ μ΄λ¦„μ„ μ§€μ •ν•΄ κ° ν΄λΌμ΄μ–ΈνΈ μ•±μ„ κµ¬μ„±ν•λ”κ²ƒκ³Όλ” λ‹¤λ¥Έ λ°©μ‹μ΄ ν•„μ”ν•λ‹¤." /><meta property="og:description" content="5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨. νλ“κ°€ λ‹¤λ¥Έ νλ“μ—κ² μ κ³µν•λ” μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ λ‹¤λ¥Έ νλ“λ¥Ό μ°Ύλ” λ°©λ²•μ΄ ν•„μ”ν•λ‹¤. μΏ λ²„λ„¤ν‹°μ¤μ—μ„λ” μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” μ„λ²„μ μ •ν™•ν• IP μ£Όμ†λ‚ νΈμ¤νΈ μ΄λ¦„μ„ μ§€μ •ν•΄ κ° ν΄λΌμ΄μ–ΈνΈ μ•±μ„ κµ¬μ„±ν•λ”κ²ƒκ³Όλ” λ‹¤λ¥Έ λ°©μ‹μ΄ ν•„μ”ν•λ‹¤." /><link rel="canonical" href="https://sungsu9022.github.io/posts/devlog-platform-kubernetes-in-action5/" /><meta property="og:url" content="https://sungsu9022.github.io/posts/devlog-platform-kubernetes-in-action5/" /><meta property="og:site_name" content="Sungsuβ€™s Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-16T17:34:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[kubernetes-in-action] 5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨." /><meta name="twitter:site" content="@sungsu9022dev" /><meta name="twitter:creator" content="@sungsu park" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"sungsu park"},"dateModified":"2020-08-16T17:34:00+09:00","datePublished":"2020-08-16T17:34:00+09:00","description":"5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨. νλ“κ°€ λ‹¤λ¥Έ νλ“μ—κ² μ κ³µν•λ” μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ λ‹¤λ¥Έ νλ“λ¥Ό μ°Ύλ” λ°©λ²•μ΄ ν•„μ”ν•λ‹¤. μΏ λ²„λ„¤ν‹°μ¤μ—μ„λ” μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” μ„λ²„μ μ •ν™•ν• IP μ£Όμ†λ‚ νΈμ¤νΈ μ΄λ¦„μ„ μ§€μ •ν•΄ κ° ν΄λΌμ΄μ–ΈνΈ μ•±μ„ κµ¬μ„±ν•λ”κ²ƒκ³Όλ” λ‹¤λ¥Έ λ°©μ‹μ΄ ν•„μ”ν•λ‹¤.","headline":"[kubernetes-in-action] 5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨.","mainEntityOfPage":{"@type":"WebPage","@id":"https://sungsu9022.github.io/posts/devlog-platform-kubernetes-in-action5/"},"url":"https://sungsu9022.github.io/posts/devlog-platform-kubernetes-in-action5/"}</script><title>[kubernetes-in-action] 5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨. | Sungsu's Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Sungsu's Tech Blog"><meta name="application-name" content="Sungsu's Tech Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/personal/sunny.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Sungsu's Tech Blog</a></div><div class="site-subtitle font-italic">Java/Kotlin Spring, Back-end</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/sungsu9022" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/sungsu9022dev" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['sungsu9022','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[kubernetes-in-action] 5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨.</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>[kubernetes-in-action] 5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨.</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1597566840" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 16, 2020 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="7985 words"> <em>44 min</em> read</span></div></div></div><div class="post-content"><h1 id="5-μ„λΉ„μ¤--ν΄λΌμ΄μ–ΈνΈκ°€-νλ“λ¥Ό-κ²€μƒ‰ν•κ³ -ν†µμ‹ μ„-κ°€λ¥ν•κ²-ν•¨">5. μ„λΉ„μ¤ : ν΄λΌμ΄μ–ΈνΈκ°€ νλ“λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•¨.</h1><blockquote><p>νλ“κ°€ λ‹¤λ¥Έ νλ“μ—κ² μ κ³µν•λ” μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ λ‹¤λ¥Έ νλ“λ¥Ό μ°Ύλ” λ°©λ²•μ΄ ν•„μ”ν•λ‹¤. μΏ λ²„λ„¤ν‹°μ¤μ—μ„λ” μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” μ„λ²„μ μ •ν™•ν• IP μ£Όμ†λ‚ νΈμ¤νΈ μ΄λ¦„μ„ μ§€μ •ν•΄ κ° ν΄λΌμ΄μ–ΈνΈ μ•±μ„ κµ¬μ„±ν•λ”κ²ƒκ³Όλ” λ‹¤λ¥Έ λ°©μ‹μ΄ ν•„μ”ν•λ‹¤.</p></blockquote><h2 id="κΈ°μ΅΄μ-λ°©μ‹κ³Ό-λ‹¤λ¥Έ-λ°©μ‹μ΄-ν•„μ”ν•-μ΄μ "><span class="mr-2">κΈ°μ΅΄μ λ°©μ‹κ³Ό λ‹¤λ¥Έ λ°©μ‹μ΄ ν•„μ”ν• μ΄μ </span><a href="#κΈ°μ΅΄μ-λ°©μ‹κ³Ό-λ‹¤λ¥Έ-λ°©μ‹μ΄-ν•„μ”ν•-μ΄μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>μΏ λ²„λ„¤ν‹°μ¤ νλ“λ” μΌμ‹μ μ΄κ³ , μ–Έμ λ“  λ‹¤λ¥Έ λ…Έλ“λ΅ μ΄λ™λ  μ μκΈ° λ•λ¬Έ(ν΄λ¬μ¤ν„° IPλ” μ–Έμ λ“  λ³€κ²½λ μ μλ‹¤.)<li>μΏ λ²„λ„¤ν‹°μ¤λ” λ…Έλ“μ— νλ“λ¥Ό μ¤μΌ€μ¤„λ§ν• ν›„ νλ“κ°€ μ‹μ‘λκΈ° λ°”λ΅ μ§μ „μ— νλ“μ IPμ£Όμ†λ¥Ό ν• λ‹Ήν•¨. λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ νΉμ • νλ“μ IPμ£Όμ†λ¥Ό λ―Έλ¦¬ μ• μ μ—†λ‹¤.<li>μ¤ν†  μ¤μΌ€μΌλ§ λ“±μ„ μ„ν•΄μ„λ” μ—¬λ¬ νλ“κ°€ λ™μΌν• μ„λΉ„μ¤λ΅ μ κ³µν•  μ μμ–΄μ•Ό ν•λ”λ°, κ° νλ“λ§λ‹¤ κ³ μ ν• IPμ£Όμ†κ°€ μκ³ , ν΄λΌμ΄μ–ΈνΈλ” μ„λΉ„μ¤λ¥Ό μ§€μ›ν•λ” νλ“μ μμ™€ IPμ— μƒκ΄€μ—†μ΄ λ‹¨μΌ IPμ£Όμ†λ΅ λ¨λ“  νλ“μ— μ—‘μ„Έμ¤ν• μ μμ–΄μ•Ό ν•λ‹¤.</ul><h2 id="51-μ„λΉ„μ¤-μ†κ°"><span class="mr-2">5.1 μ„λΉ„μ¤ μ†κ°</span><a href="#51-μ„λΉ„μ¤-μ†κ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>μΏ λ²„λ„¤ν‹°μ¤μ μ„λΉ„μ¤λ” λ™μΌν• μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” νλ“ κ·Έλ£Ήμ— μ§€μ†μ μΈ λ‹¨μΌ μ ‘μ μ„ λ§λ“¤μ–΄μ£Όλ” λ¦¬μ†μ¤μ΄λ‹¤.</ul><h3 id="μ„λΉ„μ¤-μ„¤λ…"><span class="mr-2">μ„λΉ„μ¤ μ„¤λ…</span><a href="#μ„λΉ„μ¤-μ„¤λ…" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤λ¥Ό λ§λ“¤κ³  ν΄λ¬μ¤ν„° μ™Έλ¶€μ—μ„ μ—‘μ„Έμ¤ν•  μ μλ„λ΅ κµ¬μ„±ν•λ©΄ μ™Έλ¶€ ν΄λΌμ΄μ–ΈνΈκ°€ νλ“μ— μ—°κ²°ν•  μ μλ” ν•λ‚μ κ³ μ • IPκ°€ λ…Έμ¶<li>μ„λΉ„μ¤κ°€ κ΄€λ¦¬ν•λ” νλ“λ“¤μ IPκ°€ λ³€κ²½λλ”λΌλ„ μ„λΉ„μ¤μ IPμ£Όμ†λ” λ³€κ²½λμ§€ μ•λ”λ‹¤.<li>λ‚΄λ¶€ ν΄λΌμ΄μ–ΈνΈμ™€ μ™Έλ¶€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘ μ„λΉ„μ¤λ΅ νλ“μ— μ ‘μ†</ul><p><a href="https://user-images.githubusercontent.com/6982740/89711371-e363b000-d9c4-11ea-9cbe-4c75809e6e7f.png" class="popup img-link "><img width="616" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-08 α„‹α…©α„’α…® 10 16 46" data-src="https://user-images.githubusercontent.com/6982740/89711371-e363b000-d9c4-11ea-9cbe-4c75809e6e7f.png" class="lazyload" data-proofer-ignore></a></p><h3 id="511-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">5.1.1 μ„λΉ„μ¤ μƒμ„±</span><a href="#511-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤λ¥Ό μ§€μ›ν•λ” νλ“κ°€ ν•κ° νΉμ€ κ·Έ μ΄μƒμΌ μ μλ‹¤.<li>μ„λΉ„μ¤ μ—°κ²°μ€ λ’·λ‹¨μ λ¨λ“  νλ“λ΅ λ΅λ“λ°Έλ°μ‹±λλ‹¤.<li>μ„λΉ„μ¤μ—μ„λ„ λ ν”λ¦¬μΉ΄μ…‹κ³Ό λ™μΌν•κ² λ μ΄λΈ” μ…€λ ‰ν„° λ§¤μ»¤λ‹μ¦μ„ κ·Έλ€λ΅ μ μ©λλ‹¤.</ul><p><a href="https://user-images.githubusercontent.com/6982740/89711417-24f45b00-d9c5-11ea-96ad-9472313548e8.png" class="popup img-link "><img width="618" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-08 α„‹α…©α„’α…® 10 18 48" data-src="https://user-images.githubusercontent.com/6982740/89711417-24f45b00-d9c5-11ea-96ad-9472313548e8.png" class="lazyload" data-proofer-ignore></a></p><h4 id="kubectl-expose"><span class="mr-2">kubectl expose</span><a href="#kubectl-expose" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ„λΉ„μ¤λ¥Ό μƒμ„±ν•κΈ° κ°€μ¥ μ‰¬μ΄ λ°©λ²•μ€ kubectl expose λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄λ‹¤.<li>expose λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ” κ²ƒ λ€μ‹  kubernetes λ…λ Ήμ–΄λ¥Ό μ΄μ©ν•΄ μ„λΉ„μ¤ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•  μλ„ μλ‹¤.</ul><h4 id="yaml-λ””μ¤ν¬λ¦½ν„°λ¥Ό-ν†µν•-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">YAML λ””μ¤ν¬λ¦½ν„°λ¥Ό ν†µν• μ„λΉ„μ¤ μƒμ„±</span><a href="#yaml-λ””μ¤ν¬λ¦½ν„°λ¥Ό-ν†µν•-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>apiVersion: v1
kind: Service
metadata:
  name: kubia
spec:
  ports:
  - port: 80                   <span class="c"># μ„λΉ„μ¤κ°€ μ‚¬μ©ν•  ν¬νΈ</span>
    targetPort: 8080     <span class="c"># μ„λΉ„μ¤κ°€ ν¬μ›λ“ν•  μ»¨ν…μ΄λ„ ν¬νΈ</span>
  selector:
    app: kubia                <span class="c"># app=kubia λ μ΄λΈ”μ΄ μλ” λ¨λ“  νλ“κ°€ μ΄ μ„λΉ„μ¤μ— ν¬ν•¨λλ‹¤λ”κ²ƒμ„ μλ―Έ</span>
</pre></table></code></div></div><h4 id="μƒ-μ„λΉ„μ¤-κ²€μ‚¬ν•κΈ°"><span class="mr-2">μƒ μ„λΉ„μ¤ κ²€μ‚¬ν•κΈ°</span><a href="#μƒ-μ„λΉ„μ¤-κ²€μ‚¬ν•κΈ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># μ„λΉ„μ¤ μƒμ„±</span>
kubectl create <span class="nt">-f</span> kubia-svc.yaml

<span class="c"># μ„λΉ„μ¤ μ •λ³΄ μ΅°ν ( λ‚΄λ¶€ ν΄λ¬μ¤ν„° IPκ°€ ν• λ‹Ήλμ—λ”μ§€ ν™•μΈ )</span>
kubectl get svc
</pre></table></code></div></div><ul><li>μ΄λ ‡κ² ν΄λ¬μ¤ν„° IPκ°€ ν• λ‹Ήλλ©΄ ν΄λ¬μ¤ν„° λ‚΄λ¶€μ—μ„λ” λ°”λ΅ μ—‘μ„Έμ¤ν•  μ μλ‹¤.</ul><h4 id="μ‹¤ν–‰μΈ-μ»¨ν…μ΄λ„μ—-μ›κ²©μΌλ΅-λ…λ Ήμ–΄-μ‹¤ν–‰"><span class="mr-2">μ‹¤ν–‰μΈ μ»¨ν…μ΄λ„μ— μ›κ²©μΌλ΅ λ…λ Ήμ–΄ μ‹¤ν–‰</span><a href="#μ‹¤ν–‰μΈ-μ»¨ν…μ΄λ„μ—-μ›κ²©μΌλ΅-λ…λ Ήμ–΄-μ‹¤ν–‰" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>kubectl exec λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ©΄ κΈ°μ΅΄ νλ“μ μ»¨ν…μ΄λ„ λ‚΄μ—μ„ μ›κ²©μΌλ΅ μ„μμ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•  μ μλ‹¤.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># νΉμ • Podμ— μ ‘μ†ν•μ—¬ μ„λΉ„μ¤μ ν΄λ¬μ¤ν„° IPλ΅ http μ”μ²­</span>
kubectl <span class="nb">exec </span>kubia-4dkws <span class="nt">--</span> curl <span class="nt">-s</span> http://10.102.206.16

<span class="c"># pod shell μ ‘κ·Ό</span>
kubectl <span class="nb">exec</span> <span class="nt">--stdin</span> <span class="nt">--tty</span> kubia-4dkws <span class="nt">--</span> /bin/bash
</pre></table></code></div></div><h5 id="λ”λΈ”-λ€μ‹λ¥Ό-μ‚¬μ©ν•λ”-μ΄μ "><span class="mr-2">λ”λΈ” λ€μ‹λ¥Ό μ‚¬μ©ν•λ” μ΄μ </span><a href="#λ”λΈ”-λ€μ‹λ¥Ό-μ‚¬μ©ν•λ”-μ΄μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><ul><li>λ…λ Ήμ–΄μ λ”λΈ” λ€μ‹(β€“)λ” kubectl λ…λ Ήμ¤„ μµμ…μ λμ„ μλ―Έν•¨.<li>λ”λΈ” λ€μ‹ λ’¤μ λ¨λ“  κ²ƒμ€ νλ“ λ‚΄μ—μ„ μ‹¤ν–‰λΌμ•Ό ν•λ” λ…λ Ήμ΄λ‹¤.<li><code class="language-plaintext highlighter-rouge">kubectl exec kubia-4dkws -- curl -s http://10.102.206.16</code> μ μμ μ—μ„ λ”λΈ” λ€μ‹κ°€ μ—†λ‹¤λ©΄ -s μµμ…μ€ kubectl execμ μµμ…μΌλ΅ ν•΄μ„ν•μ—¬ μ²λ¦¬ λμ§€ μ•λ”λ‹¤.</ul><p><a href="https://user-images.githubusercontent.com/6982740/90332623-6904e280-dff9-11ea-908a-12e6f00ba2f2.png" class="popup img-link "><img width="702" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 7 48 01" data-src="https://user-images.githubusercontent.com/6982740/90332623-6904e280-dff9-11ea-908a-12e6f00ba2f2.png" class="lazyload" data-proofer-ignore></a></p><h4 id="μ„λΉ„μ¤μ-μ„Έμ…-μ–΄ν”Όλ‹ν‹°-κµ¬μ„±"><span class="mr-2">μ„λΉ„μ¤μ μ„Έμ… μ–΄ν”Όλ‹ν‹° κµ¬μ„±</span><a href="#μ„λΉ„μ¤μ-μ„Έμ…-μ–΄ν”Όλ‹ν‹°-κµ¬μ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>λ™μΌν• ν΄λΌμ΄μ–ΈνΈμ—μ„ μ”μ²­ν•λ”λΌλ„ μ„λΉ„μ¤ ν”„λ΅μ‹κ°€ κ° μ—°κ²°μ„ μ„μμ νλ“λ¥Ό μ„ νƒν•΄μ„ μ—°κ²°μ„ λ‹¤μ‹ μ „λ‹¬(forward)ν•κΈ° λ•λ¬Έμ— μ”μ²­ν•  λ•λ§λ‹¤ λ‹¤λ¥Έ νλ“κ°€ μ„ νƒλλ‹¤.<li>νΉμ • ν΄λΌμ΄μ–ΈνΈμ λ¨λ“  μ”μ²­μ„ λ§¤λ² κ°™μ€ νλ“λ΅ λ¦¬λ””λ ‰μ…ν•λ ¤λ©΄ μ„λΉ„μ¤μ μ„Έμ… μ–΄ν”Όλ‹ν‹°(sessionAffinity)μ†μ„±μ„ κΈ°λ³Έκ°’ None λ€μ‹  ClientIPλ΅ μ„¤μ •ν•λ©΄ λλ‹¤.<li>μΏ λ²„λ„¤ν‹°μ¤μ—μ„λ” None, ClientIPλ‘ κ°€μ§€ μ ν•μ μ„λΉ„μ¤ μ„Έμ… μ–΄ν”Όλ‹ν‹°λ§ μ§€μ›.<li>μ„λΉ„μ¤ λ λ²¨μ—μ„λ” HTTP μμ¤€μ—μ„λ” μ‘λ™ν•μ§€ μ•κ³  TPC / UDP ν¨ν‚·μ„ μ²λ¦¬ν•κ³  κ·Έλ“¤μ΄ κ°€μ§€κ³  μλ” payloadλ” μ‹ κ²½μ“°μ§€ μ•λ”λ‹¤.(μΏ ν‚¤ κΈ°λ°μΌλ΅ ν•  μ μ—†μ)</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubia</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">sessionAffinity</span><span class="pi">:</span> <span class="s">ClientIP</span> <span class="c1"># λ™μΌν• ν΄λΌμ΄μ–ΈνΈ IPμ λ¨λ“  μ”μ²­μ„ λ™μΌν• νλ“λ΅ μ „λ‹¬</span>
</pre></table></code></div></div><h4 id="λ™μΌν•-μ„λΉ„μ¤μ—μ„-μ—¬λ¬-κ°μ-ν¬νΈ-λ…Έμ¶"><span class="mr-2">λ™μΌν• μ„λΉ„μ¤μ—μ„ μ—¬λ¬ κ°μ ν¬νΈ λ…Έμ¶</span><a href="#λ™μΌν•-μ„λΉ„μ¤μ—μ„-μ—¬λ¬-κ°μ-ν¬νΈ-λ…Έμ¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>νλ“κ°€ 2κ°μ ν¬νΈ(http : 8080, https : 8443)μ„ μμ‹ ν•λ‹¤λ©΄ ν•λ‚μ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•΄ ν¬νΈ 80κ³Ό 433μ„ νλ“μ ν¬νΈ 8080κ³Ό 8443μΌλ΅ μ „λ‹¬ν•  μ μμ.<li>ν•λ‚μ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•΄ λ©€ν‹° ν¬νΈ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ©΄ λ‹¨μΌ ν΄λ¬μ¤ν„° IPλ΅ λ¨λ“  μ„λΉ„μ¤ ν¬νΈκ°€ λ…Έμ¶λλ‹¤.</ul><h4 id="μ΄λ¦„μ΄-μ§€μ •λ-ν¬νΈ-μ‚¬μ©"><span class="mr-2">μ΄λ¦„μ΄ μ§€μ •λ ν¬νΈ μ‚¬μ©</span><a href="#μ΄λ¦„μ΄-μ§€μ •λ-ν¬νΈ-μ‚¬μ©" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ν¬νΈ λ²νΈκ°€ μ μ•λ ¤μ§„ κ²½μ°κ°€ μ•„λ‹λ”λΌλ„ μ„λΉ„μ¤ μ¤ν™μ„ μΆ€ λ” λ…ν™•ν ν•  μ μλ” λ°©λ²•.<li>λ‚μ¤‘μ— μ„λΉ„μ¤ μ¤ν™μ„ λ³€κ²½ν•μ§€ μ•κ³ λ„ podμ ν¬νΈ λ²νΈλ¥Ό λ³€κ²½ν•  μ μλ‹¤λ” ν° μ¥μ μ΄ μμ.</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="c1"># νλ“ μ •μμ— ν¬νΈ μ΄λ¦„ μ‚¬μ©</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">http</span>
    <span class="na">containerPort</span><span class="pi">:</span> <span class="m">8080</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">https</span>
    <span class="na">containerPort</span><span class="pi">:</span> <span class="m">8443</span>

<span class="c1"># μ„λΉ„μ¤μ— μ΄λ¦„μ΄ μ§€μ •λ ν¬νΈ μ°Έμ΅°</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubia</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">http</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="s">http</span>       <span class="c1"># ν¬νΈ 80μ€ μ»¨ν…μ΄λ„ ν¬νΈμ μ΄λ¦„μ΄ httpμΈ κ²ƒμ— λ§¤ν•‘</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">https</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="s">https</span>      <span class="c1"># ν¬νΈ 443μ€ μ»¨ν…μ΄λ„ ν¬νΈμ μ΄λ¦„μ΄ httpsμΈ κ²ƒμ— λ§¤ν•‘</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">kubia</span>

</pre></table></code></div></div><h3 id="512-μ„λΉ„μ¤-κ²€μƒ‰"><span class="mr-2">5.1.2 μ„λΉ„μ¤ κ²€μƒ‰</span><a href="#512-μ„λΉ„μ¤-κ²€μƒ‰" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤μ νλ“λ” μƒμ„±λκΈ°λ„ ν•κ³  μ‚¬λΌμ§€κΈ°λ„ ν•κ³ , νλ“ IPκ°€ λ³€κ²½λκ±°λ‚ νλ“ μλ” λμ–΄λ‚κ±°λ‚ μ¤„μ–΄λ“¤ μλ„ μλ‹¤.<li>μ΄λ¬ν• μƒν™© μ†μ—μ„ ν•­μƒ μ„λΉ„μ¤μ IPμ£Όμ†λ΅ μ—‘μ„Έμ¤ν•  μ μμ–΄μ•Ό ν•λ‹¤.<li>μΏ λ²„λ„¤ν‹°μ¤λ” ν΄λΌμ΄μ–ΈνΈ νλ“κ°€ μ„λΉ„μ¤μ IPμ™€ ν¬νΈλ¥Ό κ²€μƒ‰ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ‹¤.</ul><h4 id="ν™κ²½λ³€μλ¥Ό-ν†µν•-μ„λΉ„μ¤-κ²€μƒ‰"><span class="mr-2">ν™κ²½λ³€μλ¥Ό ν†µν• μ„λΉ„μ¤ κ²€μƒ‰</span><a href="#ν™κ²½λ³€μλ¥Ό-ν†µν•-μ„λΉ„μ¤-κ²€μƒ‰" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>νλ“κ°€ μ‹μ‘λλ©΄ μΏ λ²„λ„¤ν‹°μ¤λ” ν•΄λ‹Ή μ‹μ μ— μ΅΄μ¬ν•λ” κ° μ„λΉ„μ¤λ¥Ό κ°€λ¦¬ν‚¤λ” ν™κ²½λ³€μ μ„ΈνΈλ¥Ό μ΄κΈ°ν™”ν•λ‹¤.<li>ν™κ²½λ³€μ λ„¤μ΄λ° κ·μΉ™μ€ μ„λΉ„μ¤ μ΄λ¦„μ λ€μ‹(-)λ” λ°‘μ¤„(_)λ΅ λ³€ν™λκ³  μ„λΉ„μ¤ μ΄λ¦„μ΄ ν™κ²½λ³€μ μ΄λ¦„μ μ ‘λ‘μ–΄λ΅ μ“°μ΄λ©΄μ„ λ¨λ“  λ¬Έμλ” λ€λ¬Έμλ΅ ν‘μ‹ν•λ‹¤.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>kubectl <span class="nb">exec </span>kubia-4dkws <span class="nb">env</span>

<span class="c"># KUBIA_SERVICE_HOST=10.102.206.16     # μ„λΉ„μ¤ ν΄λ¬μ¤ν„° IP</span>
<span class="c"># KUBIA_PORT_80_TCP_PORT=80              # μ„λΉ„μ¤κ°€ μ κ³µλλ” ν¬νΈ</span>
</pre></table></code></div></div><h4 id="dnsλ¥Ό-ν†µν•-μ„λΉ„μ¤-κ²€μƒ‰"><span class="mr-2">DNSλ¥Ό ν†µν• μ„λΉ„μ¤ κ²€μƒ‰</span><a href="#dnsλ¥Ό-ν†µν•-μ„λΉ„μ¤-κ²€μƒ‰" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>kube-system λ„¤μ„μ¤νμ΄μ¤μ— νλ“ μ¤‘ kube-dnsλΌλ” κ² μμ—λ‹¤.<li>kube-dnsλ” DNS μ„λ²„λ¥Ό μ‹¤ν–‰ν•λ©° ν΄λ¬μ¤ν„°μ—μ„ μ‹¤ν–‰μ¤‘μΈ λ‹¤λ¥Έ λ¨λ“  νλ“λ” μλ™μΌλ΅ μ΄λ¥Ό μ‚¬μ©ν•λ„λ΅ κµ¬μ„±λλ” νλ“μ΄λ‹¤.<li>νλ“μ—μ„ μ‹¤ν–‰μ¤‘μΈ ν”„λ΅μ„Έμ¤μ—μ„ μν–‰λ λ¨λ“  DNS μΏΌλ¦¬λ” μ‹μ¤ν…μ—μ„ μ‹¤ν–‰μ¤‘μΈ λ¨λ“  μ„λΉ„μ¤λ¥Ό μ•κ³  μλ” μΏ λ²„λ„¤ν‹°μ¤μ μμ²΄ DNS μ„λ²„λ΅ μ²λ¦¬λλ‹¤.<li>κ° μ„λΉ„μ¤λ” λ‚΄λ¶€ DNS μ„λ²„μ—μ„ ν•­λ©μ„ κ°€μ Έμ¤κ³  μ„λΉ„μ¤ μ΄λ¦„μ„ μ•κ³  μλ” ν΄λΌμ΄μ–ΈνΈ νλ“λ” ν™κ²½λ³€μ λ€μ‹  FQDN(μ •κ·ν™”λ λ„λ©”μΈ μ΄λ¦„)μΌλ΅ μ—‘μ„Έμ¤ ν• μ μλ‹¤.</ul><h4 id="fqdnμ„-ν†µν•-μ„λΉ„μ¤-μ—°κ²°"><span class="mr-2">FQDNμ„ ν†µν• μ„λΉ„μ¤ μ—°κ²°</span><a href="#fqdnμ„-ν†µν•-μ„λΉ„μ¤-μ—°κ²°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p>backend-database.default.svc.cluster.local β€backend-databaseβ€ -&gt; μ„λΉ„μ¤ μ΄λ¦„ β€defaultβ€ -&gt; λ„¤μ„μ¤νμ΄μ¤ β€svc.cluster.localβ€ -&gt; λ¨λ“  ν΄λ¬μ¤νΈμ λ΅μ»¬ μ„λΉ„μ¤ μ΄λ¦„μ— μ‚¬μ©λλ” λ„λ©”μΈ μ ‘λ―Έμ‚¬</p></blockquote><ul><li>ν΄λΌμ΄μ–ΈνΈλ” μ—¬μ „ν μ„λΉ„μ¤μ ν¬νΈλ²νΈλ¥Ό μ•μ•„μ•Ό ν•λ‹¤. ν‘μ¤€ ν¬νΈκ°€ μ•„λ‹ κ²½μ° λ¬Έμ κ°€ λ μ μλ‹¤.(ν™κ²½λ³€μμ—μ„ ν¬νΈ λ²νΈλ¥Ό μ–»μ„μ μμ–΄μ•Ό ν•¨)<li>μ ‘λ―Έμ‚¬μ™€ λ„¤μ„μ¤νμ΄μ¤λ” μƒλµμ΄ κ°€λ¥ν•λ‹¤.<li>μ„ μμ μ—μ„λ” β€backend-databaseβ€ FQDNλ§μΌλ΅ μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ν•  μ μλ‹¤.</ul><h4 id="νλ“μ-μ»¨ν…μ΄λ„-λ‚΄μ—μ„-μ…Έ-μ‹¤ν–‰"><span class="mr-2">νλ“μ μ»¨ν…μ΄λ„ λ‚΄μ—μ„ μ…Έ μ‹¤ν–‰</span><a href="#νλ“μ-μ»¨ν…μ΄λ„-λ‚΄μ—μ„-μ…Έ-μ‹¤ν–‰" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>νλ“ μ»¨ν…μ΄λ„ λ‚΄λ¶€μ DNS resolverκ°€ κµ¬μ„±λμ–΄ μκΈ° λ•λ¬Έμ— λ„¤μ„μ¤νμ΄μ¤μ™€ μ ‘λ―Έμ‚¬λ¥Ό μƒλµν•  μ μλ‹¤.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># νλ“ μ»¨ν…μ΄λ„ λƒ‰μ„ μ…Έ μ‹¤ν–‰</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> kubia-4dkws bash

<span class="c"># DNS resolver ν™•μΈ</span>
<span class="nb">cat</span> /etc/resolv.conf

<span class="c"># FQDNμ„ ν†µν• μ„λΉ„μ¤ νΈμ¶(λ¨λ‘ κ°™μ€ κ²°κ³Ό)</span>
curl http://kubia.default.svc.cluster.local
curl http://kubia.default
curl http://kubia
</pre></table></code></div></div><h4 id="μ„λΉ„μ¤-ipμ—-ν•‘μ„-ν• -μ-μ—†λ”-μ΄μ "><span class="mr-2">μ„λΉ„μ¤ IPμ— ν•‘μ„ ν•  μ μ—†λ” μ΄μ </span><a href="#μ„λΉ„μ¤-ipμ—-ν•‘μ„-ν• -μ-μ—†λ”-μ΄μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ„λΉ„μ¤λ΅ crulμ€ λ™μ‘ν•μ§€λ§ ν•‘μ€ μ‘λ‹µμ΄ μ¤μ§€ μ•λ”λ‹¤.<li>μ΄λ” μ„λΉ„μ¤μ ν΄λ¥΄μ„νΈ IPκ°€ κ°€μƒ IPμ΄λ―€λ΅ μ„λΉ„μ¤ ν¬νΈμ™€ κ²°ν•©λ κ²½μ°μ—λ§ μλ―Έκ°€ μκΈ° λ•λ¬Έ</ul><h2 id="52-ν΄λ¬μ¤ν„°-μ™Έλ¶€μ—-μλ”-μ„λΉ„μ¤-μ—°κ²°"><span class="mr-2">5.2 ν΄λ¬μ¤ν„° μ™Έλ¶€μ— μλ” μ„λΉ„μ¤ μ—°κ²°</span><a href="#52-ν΄λ¬μ¤ν„°-μ™Έλ¶€μ—-μλ”-μ„λΉ„μ¤-μ—°κ²°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>ν΄λ¬μ¤ν„°μ—μ„ μ‹¤ν–‰μ¤‘μΈ νλ“λ” λ‚΄λ¶€ μ„λΉ„μ¤μ— μ—°κ²°ν•λ” κ²ƒμ²λΌ μ™Έλ¶€ μ„λΉ„μ¤μ— μ—°κ²°ν•  μ μλ‹¤.</ul><h3 id="521-μ„λΉ„μ¤-μ—”λ“ν¬μΈνΈ-μ†κ°"><span class="mr-2">5.2.1 μ„λΉ„μ¤ μ—”λ“ν¬μΈνΈ μ†κ°</span><a href="#521-μ„λΉ„μ¤-μ—”λ“ν¬μΈνΈ-μ†κ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤λ” νλ“μ— μ§μ ‘ μ—°κ²°(link)λμ§€ μ•λ”λ‹¤. λ€μ‹  μ—”λ“ν¬μΈνΈ λ¦¬μ†μ¤κ°€ κ·Έ μ‚¬μ΄μ— μλ‹¤.<li>νλ“ μ…€λ ‰ν„°λ” μ„λΉ„μ¤ μ¤ν™μ— μ •μλΌ μμ§€λ§ λ“¤μ–΄μ¤λ” μ—°κ²°μ„ μ „λ‹¬ν•  λ• μ§μ ‘ μ‚¬μ©ν•μ§€ μ•κ³ , IPμ™€ ν¬νΈ λ©λ΅μ„ μ‘μ„±ν•λ”λ° μ‚¬μ©λλ©°, μ—”λ“ν¬μΈνΈ λ¦¬μ†μ¤μ— μ €μ¥λλ‹¤.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># service μ •λ³΄ μ΅°ν</span>
kubectl describe svc kubia

<span class="c"># kubia endpoints μ΅°ν</span>
kubectl get endpoints kubia
</pre></table></code></div></div><h3 id="522-μ„λΉ„μ¤-μ—”λ“ν¬μΈνΈ-μλ™-κµ¬μ„±"><span class="mr-2">5.2.2 μ„λΉ„μ¤ μ—”λ“ν¬μΈνΈ μλ™ κµ¬μ„±</span><a href="#522-μ„λΉ„μ¤-μ—”λ“ν¬μΈνΈ-μλ™-κµ¬μ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤μ μ—”λ“ν¬μΈνΈλ¥Ό μ„λΉ„μ¤μ™€ λ¶„λ¦¬ν•λ©΄ μ—”λ“ν¬μΈνΈλ¥Ό μλ™μΌλ΅ κµ¬μ„±ν•κ³  μ—…λ°μ΄νΈν• μ μλ‹¤.<li>μλ™μΌλ΅ κ΄€λ¦¬λλ” μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•΄ μ„λΉ„μ¤λ¥Ό λ§λ“¤λ ¤λ©΄ μ„λΉ„μ¤μ™€ μ—”λ“ν¬μΈνΈ λ¦¬μ†μ¤λ¥Ό λ¨λ‘ λ§λ“¤μ–΄μ•Ό ν•λ‹¤.</ul><h4 id="μ…€λ ‰ν„°-μ—†μ΄-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">μ…€λ ‰ν„° μ—†μ΄ μ„λΉ„μ¤ μƒμ„±</span><a href="#μ…€λ ‰ν„°-μ—†μ΄-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">external-service</span>          <span class="c1"># μ—”λ“ν¬μΈνΈ μ¤λΈμ νΈ μ΄λ¦„κ³Ό μΌμΉν•΄μ•Ό ν•¨.</span>
<span class="na">spec</span><span class="pi">:</span>                                          <span class="c1"># specμ—   selectorλ¥Ό μ •μν•μ§€ μ•μ.</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
</pre></table></code></div></div><h4 id="μ…€λ ‰ν„°κ°€-μ—†λ”-μ„λΉ„μ¤μ—-κ΄€ν•-μ—”λ“ν¬μΈνΈ-λ¦¬μ†μ¤-μƒμ„±"><span class="mr-2">μ…€λ ‰ν„°κ°€ μ—†λ” μ„λΉ„μ¤μ— κ΄€ν• μ—”λ“ν¬μΈνΈ λ¦¬μ†μ¤ μƒμ„±</span><a href="#μ…€λ ‰ν„°κ°€-μ—†λ”-μ„λΉ„μ¤μ—-κ΄€ν•-μ—”λ“ν¬μΈνΈ-λ¦¬μ†μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ—”λ“ν¬μΈνΈ μ¤λΈμ νΈλ” μ„λΉ„μ¤ μ΄λ¦„κ³Ό κ°™μ•„μ•Ό ν•κ³ , μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” λ€μƒ IPμ£Όμ†μ™€ ν¬νΈ λ©λ΅μ„ κ°€μ Έμ•Ό ν•¨.</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Endpoints</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">external-service</span>         <span class="c1"># μ„λΉ„μ¤ μ΄λ¦„κ³Ό μΌμΉμ‹ν‚΄.</span>
<span class="na">subsets</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">addresses</span><span class="pi">:</span>                           <span class="c1"># μ„λΉ„μ¤κ°€ μ—°κ²°μ„ μ „λ‹¬ν•  μ—”λ“ν¬μΈνΈ IP μƒμ„±</span>
    <span class="pi">-</span> <span class="na">ip</span><span class="pi">:</span> <span class="s">11.11.11.11</span>
    <span class="pi">-</span> <span class="na">ip</span><span class="pi">:</span> <span class="s">22.22.22.22</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>                              <span class="c1"># μ—”λ“ν¬μΈνΈμ λ€μƒ ν¬νΈ</span>
</pre></table></code></div></div><p><a href="https://user-images.githubusercontent.com/6982740/90333286-8177fb80-dfff-11ea-81a4-86a2872095ed.png" class="popup img-link "><img width="572" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 8 31 40" data-src="https://user-images.githubusercontent.com/6982740/90333286-8177fb80-dfff-11ea-81a4-86a2872095ed.png" class="lazyload" data-proofer-ignore></a></p><h4 id="μ™Έλ¶€-μ—”λ“ν¬μΈνΈλ¥Ό-κ°€μ§€λ”-μ„λΉ„μ¤λ¥Ό-λ§λ“¤μ–΄μ•Ό-ν•λ”-λ©μ "><span class="mr-2">μ™Έλ¶€ μ—”λ“ν¬μΈνΈλ¥Ό κ°€μ§€λ” μ„λΉ„μ¤λ¥Ό λ§λ“¤μ–΄μ•Ό ν•λ” λ©μ </span><a href="#μ™Έλ¶€-μ—”λ“ν¬μΈνΈλ¥Ό-κ°€μ§€λ”-μ„λΉ„μ¤λ¥Ό-λ§λ“¤μ–΄μ•Ό-ν•λ”-λ©μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>λ‚μ¤‘μ— μ™Έλ¶€ μ„λΉ„μ¤λ¥Ό μΏ λ²„λ„¤ν‹°μ¤ λ‚΄μ—μ„ μ‹¤ν–‰λλ” νλ“λ΅ λ§μ΄κ·Έλ μ΄μ…ν•κΈ°λ΅ ν• κ²½μ° μ„λΉ„μ¤μ— μ…€λ ‰ν„°λ¥Ό μ¶”κ°€ν•΄ μ—”λ“ν¬μΈνΈλ¥Ό μλ™μΌλ΅ κ΄€λ¦¬ ν•  μ μλ‹¤.<li>μ΄λ¥Ό ν†µν•΄ μ„λΉ„μ¤μ μ‹¤μ  κµ¬ν„μ΄ λ³€κ²½λλ” λ™μ•μ—λ„ μ„λΉ„μ¤ IP μ£Όμ†κ°€ μΌμ •ν•κ² μ μ§€λ  μ μλ‹¤.</ul><h3 id="523-μ™Έλ¶€-μ„λΉ„μ¤λ¥Ό-μ„ν•-λ³„μΉ­-μƒμ„±"><span class="mr-2">5.2.3 μ™Έλ¶€ μ„λΉ„μ¤λ¥Ό μ„ν• λ³„μΉ­ μƒμ„±</span><a href="#523-μ™Έλ¶€-μ„λΉ„μ¤λ¥Ό-μ„ν•-λ³„μΉ­-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="externalname-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">ExternalName μ„λΉ„μ¤ μƒμ„±</span><a href="#externalname-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ™Έλ¶€ μ„λΉ„μ¤μ λ³„μΉ­μΌλ΅ ν•λ ¤λ” κ²½μ° μ ν•(type) ν•„λ“λ¥Ό ExternalNameμΌλ΅ μ„¤μ •ν•λ©΄ λλ‹¤.</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">external-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">ExternalName</span>                                     <span class="c1"># ExternalName μ ν•</span>
  <span class="na">externalName</span><span class="pi">:</span> <span class="s">api.somecompany.com</span>      <span class="c1"># FQDN(Fully Qualified Domain Name) μ΄λ¦„ μ§€μ •</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
</pre></table></code></div></div><ul><li>μ—¬κΈ°μ„ FQDNμ„ μ‚¬μ©ν•λ” λ€μ‹  external-service.default.svc.clster.local λ„λ©”μΈ μ΄λ¦„μΌλ΅ μ™Έλ¶€ μ„λΉ„μ¤μ— μ—°κ²°ν• μλ„ μλ‹¤.<li>ExternalName μ„λΉ„μ¤λ” DNS λ λ²¨μ—μ„λ§ κµ¬ν„λλ‹¤.<li>μ„λΉ„μ¤μ— μ—°κ²°ν•λ” ν΄λΌμ΄μ–ΈνΈλ” μ„λΉ„μ¤ ν”„λ΅μ‹λ¥Ό μ™„μ „ν λ¬΄μ‹ν•κ³  μ™Έλ¶€ μ„λΉ„μ¤μ— μ§μ ‘ μ—°κ²°λλ‹¤.<li>μ΄λ¬ν• μ΄μ λ΅ Cluster IPλ¥Ό μ–»μ„ μ μ—†μ.</ul><h2 id="53-μ™Έλ¶€-ν΄λΌμ΄μ–ΈνΈμ—-μ„λΉ„μ¤-λ…Έμ¶"><span class="mr-2">5.3 μ™Έλ¶€ ν΄λΌμ΄μ–ΈνΈμ— μ„λΉ„μ¤ λ…Έμ¶</span><a href="#53-μ™Έλ¶€-ν΄λΌμ΄μ–ΈνΈμ—-μ„λΉ„μ¤-λ…Έμ¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>μΏ λ²„λ„¤ν‹°μ¤λ μ™Έλ¶€μ—μ„ μ„λΉ„μ¤λ¥Ό μ—‘μ„Έμ¤ν•  μ μλ” λ°©λ²•μ„ λ‡κ°€μ§€ μ κ³µν•΄μ¤€λ‹¤.</ul><p><a href="https://user-images.githubusercontent.com/6982740/90333393-5510af00-e000-11ea-92ce-03a41d66bbf9.png" class="popup img-link "><img width="556" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 8 37 34" data-src="https://user-images.githubusercontent.com/6982740/90333393-5510af00-e000-11ea-92ce-03a41d66bbf9.png" class="lazyload" data-proofer-ignore></a></p><h3 id="531-λ…ΈνΈν¬νΈ-μ„λΉ„μ¤"><span class="mr-2">5.3.1 λ…ΈνΈν¬νΈ μ„λΉ„μ¤</span><a href="#531-λ…ΈνΈν¬νΈ-μ„λΉ„μ¤" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤λ¥Ό μƒμ„±ν•κ³  μ ν•μ„ λ…Έλ“ν¬νΈλ΅ μ„¤μ •ν•λ” λ°©λ²•</ul><h4 id="λ…Έλ“ν¬νΈ-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">λ…Έλ“ν¬νΈ μ„λΉ„μ¤ μƒμ„±</span><a href="#λ…Έλ“ν¬νΈ-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>nodePortλ¥Ό μƒλµν•  κ²½μ° μΏ λ²„λ„¤ν‹°μ¤κ°€ μ„μμ ν¬νΈλ¥Ό μ„ νƒν•λ‹¤.</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubia-nodeport</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">NodePort</span>                     <span class="c1"># λ…Έλ“ν¬νΈ μ„λΉ„μ¤ μ ν•</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>                               <span class="c1"># μ„λΉ„μ¤ ν΄λ¬μ¤ν„° IP ν¬νΈ</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">8080</span>                 <span class="c1"># μ„λΉ„μ¤ λ€μƒ νλ“μ ν¬νΈ</span>
    <span class="na">nodePort</span><span class="pi">:</span> <span class="m">30123</span>                 <span class="c1"># κ° ν΄λ¬μ¤ν„° λ…Έλ“μ ν¬νΈ 30123μ„ ν†µν•΄ μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ ν• μ μμ.</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">kubia</span>
</pre></table></code></div></div><h4 id="λ…Έλ“ν¬νΈ-μ„λΉ„μ¤-ν™•μΈ"><span class="mr-2">λ…Έλ“ν¬νΈ μ„λΉ„μ¤ ν™•μΈ</span><a href="#λ…Έλ“ν¬νΈ-μ„λΉ„μ¤-ν™•μΈ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="c"># λ…Έλ“ν¬νΈ μ„λΉ„μ¤ μƒμ„±</span>
kubectl create <span class="nt">-f</span> kubia-svc-nodeport.yaml

<span class="c"># λ…Έλ“ν¬νΈ μ„λΉ„μ¤ ν™•μΈ</span>
<span class="c"># kubectl get svc kubia-nodeport</span>

<span class="c"># λ…Έλ“ Ip μ΅°ν(minikubeμ—μ„λ” μ•λ¨)</span>
kubectl get nodes <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.items[*].status.addresses[?(@.type=="ExternalIP")].address}'</span>

<span class="c"># minikube nodeport service(λ…Έλ“ν¬νΈ μ„λΉ„μ¤λ¥Ό λ΅μ»¬μ—μ„ μ ‘κ·Ό κ°€λ¥ν•λ„λ΅ μ²λ¦¬)</span>
minikube service kubia-nodeport
crul http://127.0.0.1:53446/

|-----------|----------------|-------------|-------------------------|
| NAMESPACE |      NAME      | TARGET PORT |           URL           |
|-----------|----------------|-------------|-------------------------|
| default   | kubia-nodeport |          80 | http://172.17.0.2:30123 |
|-----------|----------------|-------------|-------------------------|
πƒ  Starting tunnel <span class="k">for </span>service kubia-nodeport.
|-----------|----------------|-------------|------------------------|
| NAMESPACE |      NAME      | TARGET PORT |          URL           |
|-----------|----------------|-------------|------------------------|
| default   | kubia-nodeport |             | http://127.0.0.1:53446 |
|-----------|----------------|-------------|------------------------|
</pre></table></code></div></div><p><a href="https://user-images.githubusercontent.com/6982740/90333485-10394800-e001-11ea-87ec-1c7d6e0559fa.png" class="popup img-link "><img width="609" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 8 42 49" data-src="https://user-images.githubusercontent.com/6982740/90333485-10394800-e001-11ea-87ec-1c7d6e0559fa.png" class="lazyload" data-proofer-ignore></a></p><h4 id="λ…Έλ“ν¬νΈ-μ„λΉ„μ¤μ-λ‹¨μ "><span class="mr-2">λ…Έλ“ν¬νΈ μ„λΉ„μ¤μ λ‹¨μ </span><a href="#λ…Έλ“ν¬νΈ-μ„λΉ„μ¤μ-λ‹¨μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ν΄λΌμ΄μ–ΈνΈκ°€ ν•λ‚μ λ…Έλ“μ—λ§ μ”μ²­ν•λ” κ²½μ° λ…Έλ“μ— μ¥μ• κ°€ λ°μƒν•  κ²½μ° λ” μ΄μƒ μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ν•  μ μ—†μΌλ―€λ΅, λ…Έλ“ μ•μ— λ΅λ“λ°Έλ°μ„λ¥Ό λ°°μΉν•λ” κ²ƒμ΄ μΆ‹λ‹¤.</ul><h3 id="532-μ™Έλ¶€-λ΅λ“λ°Έλ°μ„λ΅-μ„λΉ„μ¤-λ…Έμ¶"><span class="mr-2">5.3.2 μ™Έλ¶€ λ΅λ“λ°Έλ°μ„λ΅ μ„λΉ„μ¤ λ…Έμ¶</span><a href="#532-μ™Έλ¶€-λ΅λ“λ°Έλ°μ„λ΅-μ„λΉ„μ¤-λ…Έμ¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°λ” λ΅λ“λ°Έλ°μ„λ¥Ό μλ™μΌλ΅ ν”„λ΅λΉ„μ €λ‹ν•λ” κΈ°λ¥μ„ μ κ³µν•λ‹¤.<li>μΏ λ²„λ„¤ν‹°μ¤κ°€ λ΅λ“λ°Έλ°μ„ μ„λΉ„μ¤λ¥Ό μ§€μ›ν•μ§€ μ•λ” ν™κ²½μ—μ„ μ‹¤ν–‰μ¤‘μΈ κ²½μ° λ΅λ“λ°Έλ°μ„λ” ν”„λ΅λΉ„μ €λ‹λμ§€λ” μ•μ§€λ§ μ„λΉ„μ¤λ” μ—¬μ „ν λ…Έλ“ν¬νΈ μ„λΉ„μ¤μ²λΌ μ‘λ™ν•λ‹¤.</ul><h4 id="λ΅λ“λ°Έλ°μ„-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">λ΅λ“λ°Έλ°μ„ μ„λΉ„μ¤ μƒμ„±</span><a href="#λ΅λ“λ°Έλ°μ„-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubia-loadbalancer</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>              <span class="c1"># μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°λ¥Ό νΈμ¤ν…ν•λ” μΈν”„λΌμ—μ„ λ΅λ“λ°Έλ°μ„λ¥Ό μ–»μ„μ μλ‹¤.</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">8080</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">kubia</span>
</pre></table></code></div></div><h4 id="λ΅λ“λ°Έλ°μ„λ¥Ό-ν†µν•-μ„λΉ„μ¤-μ—°κ²°"><span class="mr-2">λ΅λ“λ°Έλ°μ„λ¥Ό ν†µν• μ„λΉ„μ¤ μ—°κ²°</span><a href="#λ΅λ“λ°Έλ°μ„λ¥Ό-ν†µν•-μ„λΉ„μ¤-μ—°κ²°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># λ΅λ“λ°Έλ°μ„ μ„λΉ„μ¤ μƒμ„±</span>
kubectl create <span class="nt">-f</span> kubia-svc-loadbalancer.yaml

<span class="c"># ν™•μΈ</span>
kubectl get svc kubia-loadbalancer
</pre></table></code></div></div><p><a href="https://user-images.githubusercontent.com/6982740/90333732-17f9ec00-e003-11ea-88c5-41a070370f14.png" class="popup img-link "><img width="617" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 8 57 20" data-src="https://user-images.githubusercontent.com/6982740/90333732-17f9ec00-e003-11ea-88c5-41a070370f14.png" class="lazyload" data-proofer-ignore></a></p><h4 id="μ„Έμ…-μ–΄ν”Όλ‹ν‹°μ™€-μ›Ή-λΈλΌμ°μ €"><span class="mr-2">μ„Έμ… μ–΄ν”Όλ‹ν‹°μ™€ μ›Ή λΈλΌμ°μ €</span><a href="#μ„Έμ…-μ–΄ν”Όλ‹ν‹°μ™€-μ›Ή-λΈλΌμ°μ €" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ›Ή λΈλΌμ°μ €μ—μ„ μ„Έμ… μ–΄ν”Όν‹°λ‹κ°€ Noneμ΄λ”λΌλ„ κ°™μ€ νλ“λ΅ κ³„μ† μ”μ²­ν•λ” ν„μƒμ„ λ³Όμ μμ.<li>κ·Έ μ΄μ λ” λΈλΌμ°μ €μ http keep-alive headerμ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ΄λ‹¤.</ul><h3 id="533-μ™Έλ¶€-μ—°κ²°μ-νΉμ„±-μ΄ν•΄"><span class="mr-2">5.3.3 μ™Έλ¶€ μ—°κ²°μ νΉμ„± μ΄ν•΄</span><a href="#533-μ™Έλ¶€-μ—°κ²°μ-νΉμ„±-μ΄ν•΄" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="λ¶ν•„μ”ν•-λ„¤νΈμ›ν¬-ν™‰μ-μ΄ν•΄μ™€-μλ°©"><span class="mr-2">λ¶ν•„μ”ν• λ„¤νΈμ›ν¬ ν™‰μ μ΄ν•΄μ™€ μλ°©</span><a href="#λ¶ν•„μ”ν•-λ„¤νΈμ›ν¬-ν™‰μ-μ΄ν•΄μ™€-μλ°©" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ™Έλ¶€ ν΄λΌμ΄μ–ΈνΈκ°€ λ…Έλ“ν¬νΈλ΅ μ„λΉ„μ¤μ— μ”μ²­ν•  κ²½μ° μ„μλ΅ μ„ νƒλ νλ“κ°€ μ—°κ²°μ„ μμ‹ ν• λ™μΌν• λ…Έλ“μ—μ„ μ‹¤ν–‰μ¤‘μΌ μλ„ μκ³ , κ·Έλ ‡μ§€ μ•μ„ μλ„ μλ‹¤.<li>νλ“μ— λ„λ‹¬ν•λ ¤λ©΄ μ¶”κ°€μ μΈ λ„¤νΈμ›ν¬ ν™‰μ΄ ν•„μ”ν•  μ μμΌλ©° μ΄κ²ƒμ΄ ν•­μƒ λ°”λμ§ν• κ²ƒμ€ μ•„λ‹λ‹¤.<li>μ”μ²­μ„ μμ‹ ν• λ…Έλ“μ—μ„ μ‹¤ν–‰μ¤‘μΈ νλ“λ΅λ§ μ™Έλ¶€ νΈλν”½μ„ μ „λ‹¬ν•λ„λ΅ μ„λΉ„μ¤λ¥Ό κµ¬μ„±ν•΄ μ¶”κ°€ ν™‰μ„ λ°©μ§€ν•  μ μλ” μµμ…μ„ μ κ³µν•λ‹¤.</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="na">spec</span><span class="pi">:</span>
   <span class="na">externalTrafficPolicy</span><span class="pi">:</span> <span class="s">Local</span>
</pre></table></code></div></div><h4 id="externaltrafficpolicyμ„-μ΄μ©ν• λ•-μ£Όμμ‚¬ν•­"><span class="mr-2">externalTrafficPolicyμ„ μ΄μ©ν• λ• μ£Όμμ‚¬ν•­</span><a href="#externaltrafficpolicyμ„-μ΄μ©ν• λ•-μ£Όμμ‚¬ν•­" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ„λΉ„μ¤ ν”„λ΅μ‹λ” λ΅μ»¬μ— μ‹¤ν–‰μ¤‘μΈ νλ“λ¥Ό μ„ νƒν•λ”λ° λ΅μ»¬ νλ“κ°€ μ—…μΌλ©΄ μ”μ²­μ„ μ¤‘λ‹¨μ‹ν‚¨λ‹¤.(λ΅λ“λ°Έλ°μ„λ” νλ“κ°€ ν•λ‚ μ΄μƒ μλ” λ…Έλ“μ—λ§ μ—°κ²°μ„ μ „λ‹¬ν•λ„λ΅ ν•΄μ•Ό ν•¨)<li>λ¨λ“  νλ“μ— κ· λ“±ν•κ² λ¶„μ‚°λμ§€ μ•μ„ μ μλ‹¤.</ul><p><a href="https://user-images.githubusercontent.com/6982740/90333794-9c4c6f00-e003-11ea-88fc-6314f2e18726.png" class="popup img-link "><img width="451" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 9 01 04" data-src="https://user-images.githubusercontent.com/6982740/90333794-9c4c6f00-e003-11ea-88fc-6314f2e18726.png" class="lazyload" data-proofer-ignore></a></p><h4 id="ν΄λΌμ΄μ–ΈνΈ-ipκ°€-λ³΄μ΅΄λμ§€-μ•μ-μΈμ‹"><span class="mr-2">ν΄λΌμ΄μ–ΈνΈ IPκ°€ λ³΄μ΅΄λμ§€ μ•μ μΈμ‹</span><a href="#ν΄λΌμ΄μ–ΈνΈ-ipκ°€-λ³΄μ΅΄λμ§€-μ•μ-μΈμ‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>λ…Έλ“ν¬νΈλ΅ μ—°κ²°μ„ μμ‹ ν•λ©΄ ν¨ν‚·μ—μ„ μ†μ¤ λ„¤νΈμ›ν¬ μ£Όμ† λ³€ν™(SNAT)μ΄ μν–‰λλ―€λ΅ ν¨ν‚·μ μ†μ¤ IPκ°€ λ³€κ²½λλ‹¤.<li>μ›Ή μ„λ²„μ κ²½μ° μ—‘μ„Έμ¤ λ΅κ·Έμ— λΈλΌμ°μ €μ IPλ¥Ό ν‘μ‹ν•  μ μ—†λ‹¤λ” κ²ƒμ€ μλ―Έν•¨..<li>λ΅μ»¬ μ™Έλ¶€ νΈλν”½ μ •μ±…(Local External Traffic Policyμ€ μ—°κ²°μ„ μμ‹ ν•λ” λ…Έλ“μ™€ λ€μƒ νλ“λ¥Ό νΈμ¤ν…ν•λ” λ…Έλ“ μ‚¬μ΄μ— μ¶”κ°€ ν™‰μ΄ μ—†κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈ IP λ³΄μ΅΄μ— μν–¥μ„ λ―ΈμΉλ‹¤.</ul><h2 id="54-μΈκ·Έλ μ¤-λ¦¬μ†μ¤λ΅-μ„λΉ„μ¤-μ™Έλ¶€-λ…Έμ¶"><span class="mr-2">5.4 μΈκ·Έλ μ¤ λ¦¬μ†μ¤λ΅ μ„λΉ„μ¤ μ™Έλ¶€ λ…Έμ¶</span><a href="#54-μΈκ·Έλ μ¤-λ¦¬μ†μ¤λ΅-μ„λΉ„μ¤-μ™Έλ¶€-λ…Έμ¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://user-images.githubusercontent.com/6982740/90333839-0b29c800-e004-11ea-8afd-0bcb04165574.png" class="popup img-link "><img width="617" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 9 03 57" data-src="https://user-images.githubusercontent.com/6982740/90333839-0b29c800-e004-11ea-8afd-0bcb04165574.png" class="lazyload" data-proofer-ignore></a></p><h3 id="μΈκ·Έλ μ¤κ°€-ν•„μ”ν•-μ΄μ "><span class="mr-2">μΈκ·Έλ μ¤κ°€ ν•„μ”ν• μ΄μ </span><a href="#μΈκ·Έλ μ¤κ°€-ν•„μ”ν•-μ΄μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μΈκ·Έλ μ¤λ” ν• IP μ£Όμ†λ΅ μμ‹­ κ°μ μ„λΉ„μ¤μ— μ ‘κ·Όμ΄ κ°€λ¥ν•λ„λ΅ μ§€μ›ν•λ‹¤.<li>λ„¤νΈμ›ν¬ μ¤νƒμ μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµ(HTTP)μ—μ„ μ‘λ™ν•λ©°, μ„λΉ„μ¤κ°€ ν•  μ μ—†λ” μΏ ν‚¤ κΈ°λ° μ„Έμ… μ–΄ν”Όλ‹ν‹° λ“±κ³Ό κ°™μ€ κΈ°λ¥ μ κ³µμ΄ κ°€λ¥ν•λ‹¤.</ul><h4 id="minikubeμ—μ„-μΈκ·Έλ μ¤-μ• λ“μ¨-ν™μ„±ν™”"><span class="mr-2">Minikubeμ—μ„ μΈκ·Έλ μ¤ μ• λ“μ¨ ν™μ„±ν™”</span><a href="#minikubeμ—μ„-μΈκ·Έλ μ¤-μ• λ“μ¨-ν™μ„±ν™”" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c"># minikube addons ν™•μΈ</span>
minikube addons list

<span class="c"># ingress addons ν™μ„±ν™”( minikube start --vm=true λ΅ μ‹μ‘ν•΄μ•Ό κ°€λ¥)</span>
minikube addons <span class="nb">enable </span>ingress

<span class="c"># κΈ°μ΅΄μ— μ„¤μΉλ docker κΈ°λ° minikube delete</span>
minikube delete

<span class="c"># minikube vm λ¨λ“λ΅ μ‹μ‘</span>
minikube start <span class="nt">--vm</span><span class="o">=</span><span class="nb">true</span> <span class="nt">--driver</span><span class="o">=</span>hyperkit

<span class="c"># λ¨λ“  λ„¤μ„μ¤νμ΄μ¤ pods μ΅°ν</span>
kubectl get po <span class="nt">--all-namespaces</span>
</pre></table></code></div></div><h3 id="541-μΈκ·Έλ μ¤-λ¦¬μ†μ¤-μƒμ„±"><span class="mr-2">5.4.1 μΈκ·Έλ μ¤ λ¦¬μ†μ¤ μƒμ„±</span><a href="#541-μΈκ·Έλ μ¤-λ¦¬μ†μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">extensions/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubia</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">kubia.example.com</span>                       <span class="c1"># μΈκ·Έλ μ¤λ” kubia.example.com λ„λ©”μΈ μ΄λ¦„μΌλ΅ μ„λΉ„μ¤μ— λ§¤ν•‘λλ‹¤.</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
        <span class="na">backend</span><span class="pi">:</span>
          <span class="na">serviceName</span><span class="pi">:</span> <span class="s">kubia-nodeport</span>          <span class="c1"># λ¨λ“  μ”μ²­μ€ kubia-nodeport μ„λΉ„μ¤μ ν¬νΈ 80μΌλ΅ μ „λ‹¬λλ‹¤.</span>
          <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span>
</pre></table></code></div></div><h3 id="542-μΈκ·Έλ μ¤-μ„λΉ„μ¤-μ—‘μ„Έμ¤"><span class="mr-2">5.4.2 μΈκ·Έλ μ¤ μ„λΉ„μ¤ μ—‘μ„Έμ¤</span><a href="#542-μΈκ·Έλ μ¤-μ„λΉ„μ¤-μ—‘μ„Έμ¤" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c"># ingress λ¦¬μ†μ¤ μƒμ„±</span>
kubectl create <span class="nt">-f</span> kubia-ingress.yaml

<span class="c"># ingresses μ΅°ν</span>
kubectl get ingresses

<span class="c"># host μ„¤μ •</span>
<span class="nb">sudo </span>vi etc/hosts
192.168.64.2	kubia.example.com

<span class="c"># νΈμ¶</span>
curl http://kubia.example.com
</pre></table></code></div></div><h4 id="μΈκ·Έλ μ¤-λ™μ‘-λ°©μ‹"><span class="mr-2">μΈκ·Έλ μ¤ λ™μ‘ λ°©μ‹</span><a href="#μΈκ·Έλ μ¤-λ™μ‘-λ°©μ‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://user-images.githubusercontent.com/6982740/90334484-e2580180-e008-11ea-8be5-115b7310f360.png" class="popup img-link "><img width="699" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 9 38 49" data-src="https://user-images.githubusercontent.com/6982740/90334484-e2580180-e008-11ea-8be5-115b7310f360.png" class="lazyload" data-proofer-ignore></a></p><h3 id="543-ν•λ‚μ-μΈκ·Έλ μ¤λ΅-μ—¬λ¬-μ„λΉ„μ¤-λ…Έμ¶"><span class="mr-2">5.4.3 ν•λ‚μ μΈκ·Έλ μ¤λ΅ μ—¬λ¬ μ„λΉ„μ¤ λ…Έμ¶</span><a href="#543-ν•λ‚μ-μΈκ·Έλ μ¤λ΅-μ—¬λ¬-μ„λΉ„μ¤-λ…Έμ¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>κ·μΉ™κ³Ό κ²½λ΅κ°€ λ¨λ‘ λ°°μ—΄μ΄λΌ μ—¬λ¬ ν•­λ©μ„ κ°€μ§ μ μλ‹¤.<li>μ—¬λ¬ νΈμ¤νΈ(host)μ™€ κ²½λ΅(path)λ¥Ό μ—¬λ¬ μ„λΉ„μ¤(backend.serviceName)μ— λ§¤ν•‘ν•  μ μλ‹¤.</ul><h4 id="λ™μΌν•-νΈμ¤νΈμ-λ‹¤λ¥Έ-κ²½λ΅λ΅-μ—¬λ¬-μ„λΉ„μ¤-λ§¤ν•‘"><span class="mr-2">λ™μΌν• νΈμ¤νΈμ λ‹¤λ¥Έ κ²½λ΅λ΅ μ—¬λ¬ μ„λΉ„μ¤ λ§¤ν•‘</span><a href="#λ™μΌν•-νΈμ¤νΈμ-λ‹¤λ¥Έ-κ²½λ΅λ΅-μ—¬λ¬-μ„λΉ„μ¤-λ§¤ν•‘" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>   <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">kubia.example.com</span>
      <span class="s">http</span><span class="err">:</span>
          <span class="na">paths</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/kubia</span>
               <span class="s">backend</span><span class="err">:</span>                            <span class="c1"># kubia.example.com/kubiaμΌλ΅μ μ”μ²­μ„ kubia μ„λΉ„μ¤λ΅ λΌμ°ν…λλ‹¤.</span>
                    <span class="na">serviceName</span><span class="pi">:</span> <span class="s">kubia</span>
                    <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span>
            <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/bar</span>
               <span class="s">backend</span><span class="err">:</span>                            <span class="c1"># kubia.example.com/barμΌλ΅μ μ”μ²­μ„ bar μ„λΉ„μ¤λ΅ λΌμ°ν…λλ‹¤.</span>
                    <span class="na">serviceName</span><span class="pi">:</span> <span class="s">bar</span>
                    <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span>
</pre></table></code></div></div><h4 id="μ„λ΅-λ‹¤λ¥Έ-νΈμ¤νΈλ΅-μ„λ΅-λ‹¤λ¥Έ-μ„λΉ„μ¤-λ§¤ν•‘ν•κΈ°"><span class="mr-2">μ„λ΅ λ‹¤λ¥Έ νΈμ¤νΈλ΅ μ„λ΅ λ‹¤λ¥Έ μ„λΉ„μ¤ λ§¤ν•‘ν•κΈ°</span><a href="#μ„λ΅-λ‹¤λ¥Έ-νΈμ¤νΈλ΅-μ„λ΅-λ‹¤λ¥Έ-μ„λΉ„μ¤-λ§¤ν•‘ν•κΈ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="na">spec</span><span class="pi">:</span>
   <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">foo.example.com</span>
       <span class="s">http</span><span class="err">:</span>
          <span class="na">paths</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
               <span class="s">backend</span><span class="err">:</span>                            <span class="c1"># foo.example.comμΌλ΅μ μ”μ²­μ„ foo μ„λΉ„μ¤λ΅ λΌμ°ν…λλ‹¤.</span>
                    <span class="na">serviceName</span><span class="pi">:</span> <span class="s">foo</span>
                    <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">bar.example.com</span>
       <span class="s">http</span><span class="err">:</span>
          <span class="na">paths</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
               <span class="s">backend</span><span class="err">:</span>                            <span class="c1"># bar.example.comμΌλ΅μ μ”μ²­μ„ barμ„λΉ„μ¤λ΅ λΌμ°ν…λλ‹¤.</span>
                    <span class="na">serviceName</span><span class="pi">:</span> <span class="s">bar</span>
                    <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span>
</pre></table></code></div></div><h3 id="544-tls-νΈλν”½μ„-μ²λ¦¬ν•λ„λ΅-μΈκ·Έλ μ¤-κµ¬μ„±"><span class="mr-2">5.4.4 TLS νΈλν”½μ„ μ²λ¦¬ν•λ„λ΅ μΈκ·Έλ μ¤ κµ¬μ„±</span><a href="#544-tls-νΈλν”½μ„-μ²λ¦¬ν•λ„λ΅-μΈκ·Έλ μ¤-κµ¬μ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="μΈκ·Έλ μ¤λ¥Ό-μ„ν•-tls-μΈμ¦μ„-μƒμ„±"><span class="mr-2">μΈκ·Έλ μ¤λ¥Ό μ„ν• TLS μΈμ¦μ„ μƒμ„±</span><a href="#μΈκ·Έλ μ¤λ¥Ό-μ„ν•-tls-μΈμ¦μ„-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># κ°μΈν‚¤ μƒμ„±</span>
openssl genrsa <span class="nt">-out</span> tls.key 2048

<span class="c"># μΈμ¦μ„ μƒμ„±</span>
openssl req <span class="nt">-new</span> <span class="nt">-x509</span> <span class="nt">-key</span> tls.key <span class="nt">-out</span> tls.cert <span class="nt">-days</span> 360 <span class="nt">-subj</span> /CN<span class="o">=</span>kubia.example.com

<span class="c"># μ‹ν¬λ¦Ώ λ¦¬μ†μ¤ μƒμ„±</span>
kubectl create secret tls tls-secret <span class="nt">--cert</span><span class="o">=</span>tls.cert <span class="nt">--key</span><span class="o">=</span>tls.key
</pre></table></code></div></div><h4 id="certificatesigningrequest-λ¦¬μ†μ¤λ΅-μΈμ¦μ„-μ„λ…"><span class="mr-2">CertificateSigningRequest λ¦¬μ†μ¤λ΅ μΈμ¦μ„ μ„λ…</span><a href="#certificatesigningrequest-λ¦¬μ†μ¤λ΅-μΈμ¦μ„-μ„λ…" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μΈμ¦μ„λ¥Ό μ§μ ‘ μ„λ…ν•λ” λ€μ‹  CSR λ¦¬μ†μ¤λ¥Ό λ§λ“¤μ–΄ μΈμ¦μ„μ— μ„λ…ν•  μ μμ.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl certificate approve &lt;name of th CSR&gt;
</pre></table></code></div></div><h4 id="tls-νΈλν”½μ„-μ²λ¦¬ν•λ”-μΈκ·Έλ μ¤-μƒμ„±"><span class="mr-2">tls νΈλν”½μ„ μ²λ¦¬ν•λ” μΈκ·Έλ μ¤ μƒμ„±</span><a href="#tls-νΈλν”½μ„-μ²λ¦¬ν•λ”-μΈκ·Έλ μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">extensions/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubia-tls</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tls</span><span class="pi">:</span>                                           <span class="c1"># TLS κµ¬μ„±</span>
  <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">kubia.example.com</span>
    <span class="na">secretName</span><span class="pi">:</span> <span class="s">tls-secret</span>       <span class="c1"># κ°μΈν‚¤μ™€ μΈμ¦μ„λ” μ„μ—μ„ μƒμ„±ν• tls-secret μ°Έμ΅°</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">kubia.example.com</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
        <span class="na">backend</span><span class="pi">:</span>
          <span class="na">serviceName</span><span class="pi">:</span> <span class="s">kubia-nodeport</span>
          <span class="na">servicePort</span><span class="pi">:</span> <span class="m">80</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># https request νΈμ¶</span>
curl <span class="nt">-k</span> <span class="nt">-v</span> https://kubia.example.com/kubia
</pre></table></code></div></div><h2 id="55-λ λ””λ‹μ¤-ν”„λ΅λΈ--νλ“κ°€-μ—°κ²°μ„-μλ½ν• -μ¤€λΉ„κ°€-λμ„-λ•-μ‹ νΈ-λ³΄λ‚΄κΈ°-"><span class="mr-2">5.5 λ λ””λ‹μ¤ ν”„λ΅λΈ ( νλ“κ°€ μ—°κ²°μ„ μλ½ν•  μ¤€λΉ„κ°€ λμ„ λ• μ‹ νΈ λ³΄λ‚΄κΈ° )</span><a href="#55-λ λ””λ‹μ¤-ν”„λ΅λΈ--νλ“κ°€-μ—°κ²°μ„-μλ½ν• -μ¤€λΉ„κ°€-λμ„-λ•-μ‹ νΈ-λ³΄λ‚΄κΈ°-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>νλ“λ” κµ¬μ„±μ— μ‹κ°„μ΄ κ±Έλ¦΄ μ μλ‹¤. λ°μ΄ν„°λ¥Ό λ΅λ“ν•λ” λ° μ‹κ°„μ΄ κ±Έλ¦¬κ±°λ‚, μ²«λ² μ§Έ μ‚¬μ©μ μ”μ²­μ΄ λ„λ¬΄ μ¤λκ±Έλ¦¬κ±°λ‚ μ‚¬μ©μ κ²½ν—μ— μν–¥μ„ λ―ΈμΉλ” κ²ƒμ„ λ°©μ§€ν•κ³ μ μ¤€λΉ„ μ μ°¨λ¥Ό μν–‰ν•΄μ•Ό ν•  μλ„ μλ‹¤.</ul><h3 id="551-λ λ””λ‹μ¤-ν”„λ΅λΈ-μ†κ°"><span class="mr-2">5.5.1 λ λ””λ‹μ¤ ν”„λ΅λΈ μ†κ°</span><a href="#551-λ λ””λ‹μ¤-ν”„λ΅λΈ-μ†κ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>λΌμ΄λΈλ‹μ¤ ν”„λ΅λΈμ™€ λΉ„μ·ν•κ² νλ“μ— λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ •μν•  μ μλ‹¤.<li>μ£ΌκΈ°μ μΌλ΅ νΈμ¶λλ©° νΉμ • νλ“κ°€ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μμ‹ ν•  μ μλ”μ§€λ¥Ό κ²°μ •ν•λ‹¤.<li>μ• ν”λ¦¬μΌ€μ΄μ… νΉμ„±μ— λ”°λΌ μƒμ„Έν• λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ‘μ„±ν•λ” κ²ƒμ€ κ°λ°μμ λ«</ul><h4 id="λ λ””λ‹μ¤-ν”„λ΅λΈ-μ ν•"><span class="mr-2">λ λ””λ‹μ¤ ν”„λ΅λΈ μ ν•</span><a href="#λ λ””λ‹μ¤-ν”„λ΅λΈ-μ ν•" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Exec ν”„λ΅λΈ : ν”„λ΅μ„Έμ¤λ¥Ό μ‹¤ν–‰<li>HTTP GET ν”„λ΅λΈ : HTTP GET μ”μ²­ μν–‰<li>TCP μ†μΌ“ ν”„λ΅λΈ : μ»¨ν…μ΄λ„μ— TCP μ—°κ²° ν™•μΈ</ul><h4 id="λ λ””λ‹μ¤-ν”„λ΅λΈμ-λ™μ‘"><span class="mr-2">λ λ””λ‹μ¤ ν”„λ΅λΈμ λ™μ‘</span><a href="#λ λ””λ‹μ¤-ν”„λ΅λΈμ-λ™μ‘" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>μ»¨ν…μ΄λ„κ°€ μ‹μ‘λ  λ• μΏ λ²„λ„¤ν‹°μ¤λ” μ²« λ²μ§Έ λ λ””λ‹μ¤ μ κ²€μ„ μν–‰ν•κΈ° μ „μ— κµ¬μ„± κ°€λ¥ν• μ‹κ°„μ΄ κ²½κ³Όν•κΈ°λ¥Ό κΈ°λ‹¤λ¦΄ μ μλ„λ΅ κµ¬μ„± κ°€λ¥<li>μ£ΌκΈ°μ μΌλ΅ ν”„λ΅λΈλ¥Ό νΈμ¶ν•κ³  λ λ””λ‹μ¤ ν”„λ΅λΈμ κ²°κ³Όμ— λ”°λΌ μ‘λ™<li>νλ“κ°€ μ¤€λΉ„λμ§€ μ•μ•λ‹¤κ³  ν•λ©΄ μ„λΉ„μ¤μ—μ„ μ κ±°ν•κ³ , νλ“κ°€ μ¤€λΉ„λλ©΄ μ„λΉ„μ¤μ— λ‹¤μ‹ μ¶”κ°€ν•λ‹¤.<li>μ»¨ν…μ΄λ„κ°€ μ¤€λΉ„ μƒνƒ μ κ²€μ— μ‹¤ν¨ν•λ”λΌλ„ μ»¨μ—ν‹°λ„κ°€ μΆ…λ£λκ±°λ‚ λ‹¤μ‹ μ‹μ‘μ‹ν‚¤μ§€ μ•λ”λ‹¤.</ul><h4 id="λΌμ΄λΈλ‹μ¤-ν”„λ΅λΈ-vs-λ λ””λ‹μ¤-ν”„λ΅λΈ"><span class="mr-2">λΌμ΄λΈλ‹μ¤ ν”„λ΅λΈ vs λ λ””λ‹μ¤ ν”„λ΅λΈ</span><a href="#λΌμ΄λΈλ‹μ¤-ν”„λ΅λΈ-vs-λ λ””λ‹μ¤-ν”„λ΅λΈ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>λΌμ΄λΈλ‹μ¤ ν”„λ΅λΈλ” μƒνƒκ°€ μΆ‹μ§€ μ•μ€ μ»¨ν…μ΄λ„λ¥Ό μ κ±°ν•κ³  μƒλ΅­κ³  κ±΄κ°•ν• μ»¨ν…μ΄λ„λ΅ κµμ²΄ν•΄ νλ“μ μƒνƒλ¥Ό μ •μƒμΌλ΅ μ μ§€μ‹ν‚¨λ‹¤.<li>λ λ””λ‹μ¤ ν”„λ΅λΈλ” μ”μ²­μ„ μ²λ¦¬ν•  μ¤€λΉ„κ°€ λ νλ“μ μ»¨ν…μ΄λ„λ§ μ”μ²­μ„ μμ‹ ν•λ„λ΅ ν•λ‹¤.(L7 health checkμ™€ μ μ‚¬)</ul><p><a href="https://user-images.githubusercontent.com/6982740/90334809-306e0480-e00b-11ea-9cd2-04189b331957.png" class="popup img-link "><img width="586" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2020-08-16 α„‹α…©α„’α…® 9 55 14" data-src="https://user-images.githubusercontent.com/6982740/90334809-306e0480-e00b-11ea-9cd2-04189b331957.png" class="lazyload" data-proofer-ignore></a></p><h4 id="λ λ””λ‹μ¤-ν”„λ΅λΈκ°€-μ¤‘μ”ν•-μ΄μ "><span class="mr-2">λ λ””λ‹μ¤ ν”„λ΅λΈκ°€ μ¤‘μ”ν• μ΄μ </span><a href="#λ λ””λ‹μ¤-ν”„λ΅λΈκ°€-μ¤‘μ”ν•-μ΄μ " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>νλ“ κ·Έλ£Ήμ΄ λ‹¤λ¥Έ νλ“μ—μ„ μ κ³µν•λ” μ„λΉ„μ¤μ— μμ΅΄ν•λ‹¤κ³  ν–μ„λ•(μ›Ή μ•± -&gt; λ°±μ—”λ“ λ°μ΄ν„°λ² μ΄μ¤) μ›Ή μ•± νλ“μ¤‘ ν•λ‚λ§ DBμ— μ—°κ²°ν•  μ μ—†λ” κ²½μ°, μ”μ²­μ„ μ²λ¦¬ν•  μ¤€λΉ„κ°€ λμ§€ μ•μ•λ‹¤κ³  μ‹ νΈλ¥Ό μ£Όλ”κ² ν„λ…ν•  μ μλ‹¤.<li>λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ‚¬μ©ν•λ©΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ •μƒ μƒνƒμΈ νλ“ν•κ³ λ§ ν†µμ‹ ν•  μ μλ‹¤.<li>κ·Έλμ„ μ‹μ¤ν…μ— λ¬Έμ κ°€ μλ‹¤λ” κ²ƒμ„ μ λ€ μ•μ•„μ°¨λ¦¬μ§€ λ»ν•λ‹¤.</ul><h3 id="552-νλ“μ—-λ λ””λ‹μ¤-ν”„λ΅λΈ-μ¶”κ°€"><span class="mr-2">5.5.2 νλ“μ— λ λ””λ‹μ¤ ν”„λ΅λΈ μ¶”κ°€</span><a href="#552-νλ“μ—-λ λ””λ‹μ¤-ν”„λ΅λΈ-μ¶”κ°€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="c"># replicaSet μμ •</span>
kubectl edit rs kubia


<span class="c"># yaml</span>
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: kubia
spec:
  replicas: 3
  selector:
    matchLabels:
      app: kubia
  template:
    metadata:
      labels:
        app: kubia
    spec:
      containers:
        - name: kubia
          image: sungsu9022/kubia
          ports:
            - name: http
              containerPort: 8080
            readinessProbe:                      <span class="c"># νλ“μ κ° μ»¨ν…μ΄λ„μ— λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ •μ</span>
              <span class="nb">exec</span>:                                      <span class="c"># ls /var/ready λ…λ Ήμ–΄λ¥Ό μ£ΌκΈ°μ μΌλ΅ μν–‰ν•μ—¬ μ΅΄μ¬ν•λ©΄ 0(μ„±κ³µ), κ·Έλ ‡μ§€ μ•μΌλ©΄ λ‹¤λ¥Έ κ°’(μ‹¤ν¨)</span>
                <span class="nb">command</span>:
                  - <span class="nb">ls</span>
                  - /var/ready
</pre></table></code></div></div><ul><li>μ΄λ ‡κ² ν•λ©΄ /var/ready νμΌμ΄ μ—†μΌλ―€λ΅ READYμ— μ¤€λΉ„λ μ»¨ν…μ΄λ„κ°€ μ—†λ‹¤κ³  ν‘μ‹λλ‹¤.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c"># /var/ready νμΌ μƒμ„±</span>
kubectl <span class="nb">exec </span>kubia-4wjqj <span class="nt">--</span> <span class="nb">touch</span> /var/ready

<span class="c"># ν™•μΈ(kubia-4wjqj κ°€ READY 1/1λ΅ λ³€κ²½λ¨)</span>
kubectl get pods

<span class="c"># λ λ””λ‹μ¤ ν”„λ΅λΈ μ΅°ν</span>
kubectl describe pod kubia-4wjqj

<span class="c"># ν•λ‚μ READY νλ“λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶</span>
curl http://kubia.example.com
</pre></table></code></div></div><h3 id="553-μ‹¤μ -ν™κ²½μ—μ„-λ λ””λ‹μ¤-ν”„λ΅λΈκ°€-μν–‰ν•΄μ•Ό-ν•λ”-κΈ°λ¥"><span class="mr-2">5.5.3 μ‹¤μ  ν™κ²½μ—μ„ λ λ””λ‹μ¤ ν”„λ΅λΈκ°€ μν–‰ν•΄μ•Ό ν•λ” κΈ°λ¥</span><a href="#553-μ‹¤μ -ν™κ²½μ—μ„-λ λ””λ‹μ¤-ν”„λ΅λΈκ°€-μν–‰ν•΄μ•Ό-ν•λ”-κΈ°λ¥" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤μ—μ„ νλ“λ¥Ό μλ™μΌλ΅ μ¶”κ°€ν•κ±°λ‚ μ κ±°ν•λ ¤λ©΄ νλ“μ™€ μ„λΉ„μ¤μ λ μ΄λΈ” μ…€λ ‰ν„°μ— enabled=true λ μ΄λΈ”μ„ μ¶”κ°€ν•λ‹¤. μ„λΉ„μ¤μ—μ„ νλ“λ¥Ό μ κ±°ν•λ ¤λ©΄ λ μ΄λΈ”μ„ μ κ±°ν•λΌ.</ul><h4 id="λ λ””λ‹μ¤-ν”„λ΅λΈλ¥Ό-ν•­μƒ-μ •μν•λΌ"><span class="mr-2">λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό ν•­μƒ μ •μν•λΌ</span><a href="#λ λ””λ‹μ¤-ν”„λ΅λΈλ¥Ό-ν•­μƒ-μ •μν•λΌ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>νλ“μ λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ¶”κ°€ν•μ§€ μ•μΌλ©΄ νλ“κ°€ μ‹μ‘ν•λ” μ¦‰μ‹ μ„λΉ„μ¤ μ—”λ“ν¬μΈνΈκ°€ λλ‹¤.<li>μ—¬μ „ν μ‹μ‘ λ‹¨κ³„λ΅ μμ‹  μ—°κ²°μ„ μλ½ν•  μ¤€λΉ„κ°€ λμ§€ μ•μ€ μƒνƒμ—μ„ νλ“λ΅ μ „λ‹¬λλ‹¤.<li>λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈκ°€ Connection Refused μ ν•μ μ—λ¬λ¥Ό λ³΄κ² λλ‹¤.<li>κΈ°λ³Έ URLμ— HTTP μ”μ²­μ„ λ³΄λ‚΄λ”λΌλ„ ν•­μƒ λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ •μν•΄μ•Ό ν•λ‹¤.</ul><h4 id="λ λ””λ‹μ¤-ν”„λ΅λΈμ—-νλ“μ-μΆ…λ£-μ½”λ“λ¥Ό-ν¬ν•¨ν•μ§€-λ§λΌ"><span class="mr-2">λ λ””λ‹μ¤ ν”„λ΅λΈμ— νλ“μ μΆ…λ£ μ½”λ“λ¥Ό ν¬ν•¨ν•μ§€ λ§λΌ</span><a href="#λ λ””λ‹μ¤-ν”„λ΅λΈμ—-νλ“μ-μΆ…λ£-μ½”λ“λ¥Ό-ν¬ν•¨ν•μ§€-λ§λΌ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>νλ“κ°€ μΆ…λ£ν•  λ•, μ‹¤ν–‰λλ” μ•±μ€ μΆ…λ£ μ‹ νΈλ¥Ό λ°›μλ§μ μ—°κ²° μλ‹¨μ„ μ¤‘λ‹¨ν•λ‹¤.<li>μΏ λ²„λ„¤ν‹°μ¤λ” νλ“λ¥Ό μ‚­μ ν•μλ§μ λ¨λ“  μ„λΉ„μ¤μ—μ„ νλ“λ¥Ό μ κ±°ν•κΈ° λ•λ¬Έμ— κµ³μ΄ λ³„λ„λ΅ μ΄λ° μ²λ¦¬λ¥Ό ν•  ν•„μ”κ°€ μ—†λ‹¤.</ul><h2 id="56-ν—¤λ“λ¦¬μ¤-μ„λΉ„μ¤λ΅-κ°λ³„-νλ“-μ°ΎκΈ°"><span class="mr-2">5.6. ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤λ΅ κ°λ³„ νλ“ μ°ΎκΈ°</span><a href="#56-ν—¤λ“λ¦¬μ¤-μ„λΉ„μ¤λ΅-κ°λ³„-νλ“-μ°ΎκΈ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>ν΄λΌμ΄μ–ΈνΈκ°€ λ¨λ“  νλ“μ— μ—°κ²°ν•΄μ•Ό ν•λ” κ²½μ° μ–΄λ–»κ² ν• μ μμ„κΉ? νλ“κ°€ λ‹¤λ¥Έ νλ“μ— κ°κ° μ—°κ²°ν•΄μ•Ό ν•λ” κ²½μ° μ–΄λ–»κ² ν•΄μ•Ό ν• κΉ?<li>ν΄λΌμ΄μ–ΈνΈκ°€ λ¨λ“  νλ“μ— μ—°κ²°ν•λ ¤λ©΄ κ° νλ“μ IPλ¥Ό μ•μ•„μ•Ό ν•λ‹¤.<li>μΏ λ²„λ„¤ν‹°μ¤λ” ν΄λΌμ΄μ–ΈνΈκ°€ DNS μ΅°νλ΅ νλ“ IPλ¥Ό μ°Ύμ„ μ μλ„λ΅ ν•λ‹¤.<li>μΏ λ²„λ„¤ν‹°μ¤ μ„λΉ„μ¤μ— ν΄λ¬μ¤ν„° IPκ°€ ν•„μ”ν•μ§€ μ•λ‹¤λ©΄ ClusterIP ν•„λ“λ¥Ό NoneμΌλ΅ μ„¤μ •ν•μ—¬ DNS μ„λ²„λ” ν•λ‚μ μ„λΉ„μ¤ IP λ€μ‹  νλ“ IP λ©λ΅λ“¤μ„ λ°ν™ν•λ‹¤.<li>μ΄λ• κ° λ μ½”λ” ν„μ¬μ‹μ  κΈ°μ¤€μΌλ΅ μ„λΉ„μ¤λ¥Ό μ§€μ›ν•λ” κ°λ³„ νλ“μ IPλ¥Ό κ°€λ¦¬ν‚¨λ‹¤.<li>λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈλ” κ°„λ‹¨ν• DNS A λ μ½”λ“ μ΅°νλ¥Ό μν–‰ν•κ³  μ„λΉ„μ¤μ— ν¬ν•¨λ λ¨λ“  νλ“μ IPλ¥Ό μ–»μ„ μ μλ‹¤.</ul><h3 id="561-ν—¤λ“λ¦¬μ¤-μ„λΉ„μ¤-μƒμ„±"><span class="mr-2">5.6.1 ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤ μƒμ„±</span><a href="#561-ν—¤λ“λ¦¬μ¤-μ„λΉ„μ¤-μƒμ„±" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ„λΉ„μ¤ μ¤ν™μ clusterIPν•„λ“λ¥Ό NoneμΌλ΅ μ„¤μ •ν•λ©΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λΉ„μ¤μ νλ“μ— μ—°κ²°ν•  μ μλ” ν΄λ¬μ¤ν„° IPλ¥Ό ν• λ‹Ήν•μ§€ μ•κΈ° λ–„λ¬Έμ— μ„λΉ„μ¤κ°€ ν—¤λ“λ¦¬μ¤ μƒνƒκ°€ λλ‹¤.<li>ν΄λ¬μ¤ν„° Ipκ°€ μ—†κ³  μ—”λ“ν¬μΈνΈμ— νλ“ μ…€λ ‰ν„°μ™€ μΌμΉν•λ” νλ“κ°€ ν¬ν•¨λΌ μμμ„ ν™•μΈν•  μ μλ‹¤.</ul><pre><code class="language-yarml">apiVersion: v1
kind: Service
metadata:
  name: kubia-headless
spec:
  clusterIP: None                     # ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤λ΅ λ§λ“λ” spec μµμ…
  ports:
  - port: 80
    targetPort: 8080
  selector:
    app: kubia
</code></pre><h3 id="562-dnsλ΅-νλ“-μ°ΎκΈ°"><span class="mr-2">5.6.2 DNSλ΅ νλ“ μ°ΎκΈ°</span><a href="#562-dnsλ΅-νλ“-μ°ΎκΈ°" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μ‹¤μ λ΅ ν΄λΌμ΄μ–ΈνΈ κ΄€μ μ—μ„λ” ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ‚ μΌλ° μ„λΉ„μ‹λ¥Ό μ‚¬μ©ν•λ‚ κ΄€κ³„ μ—†μ΄ μ„λΉ„μ¤μ DNS μ΄λ¦„μ— μ—°κ²°ν•΄ νλ“μ— μ—°κ²°ν•  μ μλ‹¤.<li>μ°¨μ΄μ μ΄ μλ‹¤λ©΄ ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤μ κ²½μ° ν΄λΌμ΄μ–ΈνΈλ” μ„λΉ„μ¤ ν”„λ΅μ‹ λ€μ‹  νλ“μ— μ§μ ‘ μ—°κ²°ν•λ‹¤.<li>ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤λ” μ—¬μ „ν νλ“κ°„μ— λ΅λ“λ°Έλ°μ‹±μ„ μ κ³µν•μ§€λ§ μ„λΉ„μ¤ ν”„λ΅μ‹ λ€μ‹  DNS λΌμ΄λ“ λ΅λΉ λ§¤μ»¤λ‹μ¦μΌλ΅ μ²λ¦¬λλ‹¤.</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># dnsutils pod μƒμ„±</span>
kubectl run dnsutils <span class="nt">--image</span><span class="o">=</span>tutum/dnsutils <span class="nt">--generator</span><span class="o">=</span>run-pod/v1 <span class="nt">--command</span> <span class="nt">--</span> <span class="nb">sleep </span>infinity

<span class="c"># ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤λ¥Ό μ„ν•΄ λ°ν™λ DNS A λ μ½”λ“( λ μ½”λ“ λ©λ΅μ΄ ν‘μ‹λλ‹¤. )</span>
kubectl <span class="nb">exec </span>dnsutils nslookup kubia-headless

<span class="c"># μΌλ° μ„λΉ„μ¤ nslookup ( ν΄λ¬μ¤ν„° IPκ°€ ν‘μ‹λλ‹¤. )</span>
kubectl <span class="nb">exec </span>dnsutils nslookup kubia
</pre></table></code></div></div><h3 id="563-λ¨λ“ -νλ“-κ²€μƒ‰---μ¤€λΉ„λμ§€-μ•μ€-νλ“λ„-ν¬ν•¨"><span class="mr-2">5.6.3 λ¨λ“  νλ“ κ²€μƒ‰ - μ¤€λΉ„λμ§€ μ•μ€ νλ“λ„ ν¬ν•¨</span><a href="#563-λ¨λ“ -νλ“-κ²€μƒ‰---μ¤€λΉ„λμ§€-μ•μ€-νλ“λ„-ν¬ν•¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>μΏ λ²„λ„¤ν‹°μ¤κ°€ νλ“μ λ λ””λ‹μ¤ μƒνƒμ— κ΄€κ³„ μ—†μ΄ λ¨λ“  νλ“λ¥Ό μ„λΉ„μ¤μ— μ¶”κ°€λκ² ν•λ ¤λ©΄ μ„λΉ„μ¤μ— λ‹¤μ μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•΄μ•Ό ν•λ‹¤.<li>tolerate-unready-endpointsλ” deprecatedλμ—κ³ , publishNotReadyAddressesλ¥Ό μ‚¬μ©ν•΄μ„ λ™μΌν• κΈ°λ¥μ„ μ²λ¦¬ν•  μ μλ‹¤.( https://github.com/kubedb/project/issues/242 )</ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="c1">#metadata:</span>
<span class="c1">#  annotations:</span>
<span class="c1">#      service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"</span>
<span class="s">spec</span>
   <span class="s">publishNotReadyAddresses</span><span class="err">:</span> <span class="kc">true</span>

</pre></table></code></div></div><h2 id="57-μ„λΉ„μ¤-λ¬Έμ -ν•΄κ²°-faq"><span class="mr-2">5.7 μ„λΉ„μ¤ λ¬Έμ  ν•΄κ²° FAQ</span><a href="#57-μ„λΉ„μ¤-λ¬Έμ -ν•΄κ²°-faq" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>μ„λΉ„μ¤λ΅ νλ“μ— μ—‘μ„Έμ¤ν•  μ μ—†λ” κ²½μ° λ‹¤μ λ‚΄μ©μ„ ν™•μΈν•΄λ³΄λ©΄ λ„μ›€μ΄ λλ‹¤.</p><ul><li>μ™Έλ¶€κ°€ μ•„λ‹ ν΄λ¬μ¤ν„° λ‚΄μ—μ„ μ„λΉ„μ¤μ ν΄λ¬μ¤ν„° IPμ— μ—°κ²°λλ”μ§€ ν™•μΈ<li>μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ν•  μ μλ”μ§€ ν™•μΈν•λ ¤κ³  μ„λΉ„μ¤ IPλ΅ ν•‘μ„ ν•λ” μΌ€μ΄μ¤(ν•‘ λ™μ‘ μ•ν•¨)<li>λ λ””λ‹μ¤ ν”„λ΅λΈλ¥Ό μ •μν–λ‹¤λ©΄ μ„±κ³µν–λ”μ§€ ν™•μΈν•λΌ, podμ READY μ—¬λ¶€ ν™•μΈ<li>νλ“κ°€ μ„λΉ„μ¤μ μΌλ¶€μΈμ§€ ν™•μΈν•λ ¤λ©΄ kubectl get endpointsλ¥Ό μ‚¬μ©ν•΄ ν•΄λ‹Ή μ—”λ“ν¬μΈνΈ μ¤λΈμ νΈλ¥Ό ν™•μΈν•λΌ.<li>FQDNμ΄λ‚ κ·Έ μΌλ¶€λ΅ μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ν•λ ¤κ³  ν•λ”λ° μ‘λ™ν•μ§€ μ•λ” κ²½μ° FQDN λ€μ‹  ν΄λ¬μ¤ν„° IPλ¥Ό μ‚¬μ©ν•΄ μ—‘μ„Έμ¤ν• μ μλ”μ§€ ν™•μΈν•λΌ<li>λ€μƒ ν¬νΈκ°€ μ•„λ‹ μ„λΉ„μ¤λ΅ λ…Έμ¶λ ν¬νΈμ— μ—°κ²°ν•κ³  μλ”μ§€ ν™•μΈν•λΌ<li>νλ“ IPμ— μ§μ ‘ μ—°κ²°ν•΄ νλ“κ°€ μ¬λ°”λ¥Έ ν¬ν‹ μ—°κ²°λΌμλ”μ§€ ν™•μΈν•λΌ<li>μ•±μ΄ λ΅μ»¬νΈμ¤νΈμ—λ§ λ°”μΈλ”©ν•κ³  μλ”μ§€ ν™•μΈν•λΌ.</ul></blockquote><h2 id="58-μ”μ•½"><span class="mr-2">5.8 μ”μ•½</span><a href="#58-μ”μ•½" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>μ„λΉ„μ¤λ” μ•μ •λ λ‹¨μΌ IP μ£Όμ†μ™€ ν¬νΈλ΅ νΉμ • λ μ΄λΈ” μ…€λ ‰ν„°μ™€ μΌμΉν•λ” μ—¬λ¬ κ°μ νλ“λ¥Ό λ…Έμ¶<li>κΈ°λ³Έμ μΌλ΅ ν΄λ¬μ¤ν„° λ‚΄λ¶€μ—μ„ μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ν•  μ μμ§€λ§ μ ν•μ„ λ…Έλ“ν¬νΈ λλ” λ΅λ“λ°Έλ°μ„λ΅ μ„¤μ •ν•΄ ν΄λ¬μ¤ν„° μ™Έλ¶€μ—μ„ μ„λΉ„μ¤μ— μ—‘μ„Έμ¤ν•  μ μλ‹¤.<li>νλ“λ” ν™κ²½λ³€μλ¥Ό κ²€μƒ‰ν•΄ IP μ£Όμ†μ™€ ν¬νΈλ΅ μ„λΉ„μ¤λ¥Ό κ²€μƒ‰ ν• μ μλ‹¤.<li>μ—”λ“ν¬μΈνΈ λ¦¬μ†μ¤λ¥Ό λ§λ“λ” λ€μ‹  μ…€λ ‰ν„° μ„¤μ • μ—†μ΄ μ„λΉ„μ¤ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•΄ ν΄λ¬μ¤ν„° μ™Έλ¶€μ— μλ” μ„λΉ„μ¤λ¥Ό κ²€μƒ‰ν•κ³  ν†µμ‹ ν•  μ μλ‹¤.<li>ExternalName μ„λΉ„μ¤ μ ν•μΌλ΅ μ™Έλ¶€ μ„λΉ„μ¤μ— λ€ν• DNS CNAME(λ³„μΉ­)μ„ μ κ³µν•  μ μλ‹¤.<li>λ‹¨μΌ μΈκ·Έλ μ¤λ΅ μ—¬λ¬ HTTP μ„λΉ„μ¤λ¥Ό λ…Έμ¶ν•  μ μλ‹¤.<li>νλ“ μ»¨ν…μ΄λ„μ λ λ””λ‹μ¤ ν”„λ΅λΈλ” νλ“λ¥Ό μ„λΉ„μ¤ μ—”λ“ν¬μΈνΈμ— ν¬ν•¨ν•΄μ•Ό ν•λ”μ§€ μ—¬λ¶€λ¥Ό κ²°μ •ν•λ‹¤.<li>ν—¤λ“λ¦¬μ¤ μ„λΉ„μ¤λ¥Ό μƒμ„±ν•λ©΄ DNSλ΅ νλ“ IPλ¥Ό κ²€μƒ‰ν•  μ μλ‹¤.</ul><h2 id="reference"><span class="mr-2">Reference</span><a href="#reference" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://www.manning.com/books/kubernetes-in-action">kubernetes-in-action</a><li><a href="https://kubernetes.io/ko/docs/home/">kubernetes.io</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devlog/'>DevLog</a>, <a href='/categories/kubernetes/'>kubernetes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/infra/" class="post-tag no-text-decoration" >Infra</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/kubernetes-in-action/" class="post-tag no-text-decoration" >kubernetes-in-action</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[kubernetes-in-action]%205.%20%EC%84%9C%EB%B9%84%EC%8A%A4%20:%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EA%B0%80%20%ED%8C%8C%EB%93%9C%EB%A5%BC%20%EA%B2%80%EC%83%89%ED%95%98%EA%B3%A0%20%ED%86%B5%EC%8B%A0%EC%9D%84%20%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C%20%ED%95%A8.%20-%20Sungsu's%20Tech%20Blog&url=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fdevlog-platform-kubernetes-in-action5%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[kubernetes-in-action]%205.%20%EC%84%9C%EB%B9%84%EC%8A%A4%20:%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EA%B0%80%20%ED%8C%8C%EB%93%9C%EB%A5%BC%20%EA%B2%80%EC%83%89%ED%95%98%EA%B3%A0%20%ED%86%B5%EC%8B%A0%EC%9D%84%20%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C%20%ED%95%A8.%20-%20Sungsu's%20Tech%20Blog&u=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fdevlog-platform-kubernetes-in-action5%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fdevlog-platform-kubernetes-in-action5%2F&text=[kubernetes-in-action]%205.%20%EC%84%9C%EB%B9%84%EC%8A%A4%20:%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%EA%B0%80%20%ED%8C%8C%EB%93%9C%EB%A5%BC%20%EA%B2%80%EC%83%89%ED%95%98%EA%B3%A0%20%ED%86%B5%EC%8B%A0%EC%9D%84%20%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C%20%ED%95%A8.%20-%20Sungsu's%20Tech%20Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/es-bible-4-3/">[μ—λΌμ¤ν‹±μ„μΉ λ°”μ΄λΈ”] 4. λ°μ΄ν„° λ‹¤λ£¨κΈ° -3(ES Client λΌμ΄λΈλ¬λ¦¬)</a><li><a href="/posts/es-bible-4-2/">[μ—λΌμ¤ν‹±μ„μΉ λ°”μ΄λΈ”] 4. λ°μ΄ν„° λ‹¤λ£¨κΈ° -2(μ§‘κ³„)</a><li><a href="/posts/es-bible-2/">[μ—λΌμ¤ν‹±μ„μΉ λ°”μ΄λΈ”] 2. μ—λΌμ¤ν‹± μ„μΉ κΈ°λ³Έ λ™μ‘κ³Ό κµ¬μ΅°</a><li><a href="/posts/es-bible-3-1/">[μ—λΌμ¤ν‹±μ„μΉ λ°”μ΄λΈ”] 3. μΈλ±μ¤ μ„¤κ³„ - 1</a><li><a href="/posts/spark-guide-6/">[μ¤νν¬ μ™„λ²½ κ°€μ΄λ“] 6. λ‹¤μ–‘ν• λ°μ΄ν„° νƒ€μ… λ‹¤λ£¨κΈ°</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/kubernetes-in-action/">kubernetes-in-action</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/elasticsearch/">Elasticsearch</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/hands-on-reactive-programming-in-spring-5/">Hands-On Reactive Programming in Spring 5</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/devlog-platform-kubernetes-in-action1/"><div class="card-body"> <em class="small" data-ts="1596270840" data-df="ll" > Aug 1, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[kubernetes-in-action] 1. μΏ λ²„λ„¤ν‹°μ¤ μ†κ°</h3><div class="text-muted small"><p> 1. μΏ λ²„λ„¤ν‹°μ¤ μ†κ° μΏ λ²„λ„¤ν‹°μ¤ λ“±μ¥ λ°°κ²½ κ±°λ€ν• λ¨λ†€λ¦¬μ¤ λ κ±°μ‹ μ• ν”λ¦¬μΌ€μ΄μ…μ€ μ μ°¨ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λΌλ” λ…λ¦½μ μΌλ΅ μ‹¤ν–‰λλ” λ” μ‘μ€ κµ¬μ„± μ”μ†λ΅ μ„Έλ¶„ν™”λκ³  μλ‹¤. λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ” μ„λ£¨ λ¶„λ¦¬λΌ μκΈ° λ–„λ¬Έμ— κ°λ³„μ μΌλ΅ κ°λ°, λ°°ν¬, μ—…λ°μ΄νΈ, ν™•μ¥ν•  μ μλ‹¤. μ΄λ΅μ¨ μ¤λλ‚  κΈ‰λ³€ν•λ” λΉ„μ¦λ‹μ¤ μ”κµ¬μ‚¬ν•­μ„ μ¶©μ΅±μ‹ν‚¬ λ§νΌ μ‹ μ†ν•κ² μμ£Ό κµ¬μ„± μ”μ†λ¥Ό λ³€...</p></div></div></a></div><div class="card"> <a href="/posts/devlog-platform-kubernetes-in-action2/"><div class="card-body"> <em class="small" data-ts="1596357240" data-df="ll" > Aug 2, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[kubernetes-in-action] 2. λ„μ»¤μ™€ μΏ λ²„λ„¤ν‹°μ¤ μ²«κ±Έμ</h3><div class="text-muted small"><p> 2. λ„μ»¤μ™€ μΏ λ²„λ„¤ν‹°μ¤ μ²«κ±Έμ 2.1 λ„μ»¤λ¥Ό μ‚¬μ©ν• μ»¨ν…μ΄λ„ μ΄λ―Έμ§€ μƒμ„±, μ‹¤ν–‰, κ³µμ ν•κΈ° 2.1.1 Hello World μ»¨ν…μ΄λ„ μ‹¤ν–‰ν•κΈ° docker run busybox echp &quot;Hello world&quot; λ°±κ·ΈλΌμ΄λ“μ— μΌμ–΄λ‚ λ™μ‘ μ΄ν•΄ν•κΈ° docker run λ…λ Ήμ„ μν–‰ν–μ„ λ–„ μΌμ–΄λ‚λ” μΌλ“¤ 2.1.2 κ°„λ‹¨ν• node.js μ• ν”λ¦¬...</p></div></div></a></div><div class="card"> <a href="/posts/devlog-platform-kubernetes-in-action3/"><div class="card-body"> <em class="small" data-ts="1596443640" data-df="ll" > Aug 3, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[kubernetes-in-action] 3. νλ“ : μΏ λ²„λ„¤ν‹°μ¤μ—μ„ μ»¨ν…μ΄λ„ μ‹¤ν–‰</h3><div class="text-muted small"><p> 3. νλ“ : μΏ λ²„λ„¤ν‹°μ¤μ—μ„ μ»¨ν…μ΄λ„ μ‹¤ν–‰ 3.1 νλ“ μ†κ° νλ“λ” ν•¨κ» λ°°μΉλ μ»¨ν…μ΄λ„ κ·Έλ£Ήμ΄λ©°, μΏ λ²„λ„¤ν‹°μ¤μ κΈ°λ³Έ λΉλ”© λΈ”λ΅. μ»¨ν…μ΄λ„λ¥Ό κ°λ³„μ μΌλ΅ λ°°ν¬ν•κΈ°λ³΄λ‹¤λ” μ»¨ν…μ΄λ„λ¥Ό κ°€μ§„ νλ“λ¥Ό λ°°ν¬ν•κ³ , μ΄μν•λ‹¤. λ¬΄μ΅°κ±΄ 2κ° μ΄μƒμ„ μ»¨ν…μ΄λ„λ¥Ό ν¬ν•¨μ‹ν‚¤λΌλ” μλ―Έλ” μ•„λ‹κ³  μΌλ°μ μΌλ΅λ” ν•λ‚μ μ»¨ν…μ΄λ„λ§ ν¬ν•¨λλ‹¤. νλ“μ ν•µμ‹¬μ€ νλ“κ°€ μ—¬λ¬ ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/devlog-platform-kubernetes-in-action4/" class="btn btn-outline-primary" prompt="Older"><p>[kubernetes-in-action] 4. λ ν”λ¦¬μΌ€μ΄μ…κ³Ό κ·Έ λ°–μ μ»¨νΈλ΅¤λ¬ : κ΄€λ¦¬λλ” νλ“ λ°°ν¬</p></a> <a href="/posts/devlog-platform-kubernetes-in-action6/" class="btn btn-outline-primary" prompt="Newer"><p>[kubernetes-in-action] 6. λ³Όλ¥¨ : μ»¨ν…μ΄λ„μ— λ””μ¤ν¬ μ¤ν† λ¦¬μ§€ μ—°κ²°</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://sungsu9022.github.io/posts/devlog-platform-kubernetes-in-action5/'; this.page.identifier = '/posts/devlog-platform-kubernetes-in-action5/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://sungsu-parks-tech-blog.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] } ); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } if (document.querySelector('.mode-toggle')) { window.addEventListener('message', reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/kubernetes-in-action/">kubernetes-in-action</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/elasticsearch/">Elasticsearch</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/hands-on-reactive-programming-in-spring-5/">Hands-On Reactive Programming in Spring 5</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> Β© 2024 <a href="https://twitter.com/sungsu9022dev">sungsu9022</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-145894105-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-145894105-1'); }); </script>
