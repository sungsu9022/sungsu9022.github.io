<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="[Hands-On Reactive Programming in Spring 5] 1. 왜 리액티브 스프링인가?" /><meta name="author" content="sungsu park" /><meta property="og:locale" content="en" /><meta name="description" content="1. 왜 리액티브 스프링인가? 1.1 왜 리액티브인가? 서버진영에서 reactive(반응형)이라는 말이 2019년쯤부터 굉장히 빈번하게 들려왔다." /><meta property="og:description" content="1. 왜 리액티브 스프링인가? 1.1 왜 리액티브인가? 서버진영에서 reactive(반응형)이라는 말이 2019년쯤부터 굉장히 빈번하게 들려왔다." /><link rel="canonical" href="https://sungsu9022.github.io/posts/spring5-reactive-programing-1/" /><meta property="og:url" content="https://sungsu9022.github.io/posts/spring5-reactive-programing-1/" /><meta property="og:site_name" content="Sungsu’s Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-11T11:35:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Hands-On Reactive Programming in Spring 5] 1. 왜 리액티브 스프링인가?" /><meta name="twitter:site" content="@sungsu9022dev" /><meta name="twitter:creator" content="@sungsu park" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"sungsu park"},"dateModified":"2022-06-11T22:42:40+09:00","datePublished":"2022-06-11T11:35:00+09:00","description":"1. 왜 리액티브 스프링인가? 1.1 왜 리액티브인가? 서버진영에서 reactive(반응형)이라는 말이 2019년쯤부터 굉장히 빈번하게 들려왔다.","headline":"[Hands-On Reactive Programming in Spring 5] 1. 왜 리액티브 스프링인가?","mainEntityOfPage":{"@type":"WebPage","@id":"https://sungsu9022.github.io/posts/spring5-reactive-programing-1/"},"url":"https://sungsu9022.github.io/posts/spring5-reactive-programing-1/"}</script><title>[Hands-On Reactive Programming in Spring 5] 1. 왜 리액티브 스프링인가? | Sungsu's Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Sungsu's Tech Blog"><meta name="application-name" content="Sungsu's Tech Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/personal/sunny.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Sungsu's Tech Blog</a></div><div class="site-subtitle font-italic">Java/Kotlin Spring, Back-end</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/sungsu9022" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/sungsu9022dev" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['sungsu9022','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Hands-On Reactive Programming in Spring 5] 1. 왜 리액티브 스프링인가?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>[Hands-On Reactive Programming in Spring 5] 1. 왜 리액티브 스프링인가?</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1654914900" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 11, 2022 </em> </span> <span> Updated <em class="" data-ts="1654954960" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 11, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3579 words"> <em>19 min</em> read</span></div></div></div><div class="post-content"><h1 id="1-왜-리액티브-스프링인가">1. 왜 리액티브 스프링인가?</h1><h2 id="11-왜-리액티브인가"><span class="mr-2">1.1 왜 리액티브인가?</span><a href="#11-왜-리액티브인가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>서버진영에서 reactive(반응형)이라는 말이 2019년쯤부터 굉장히 빈번하게 들려왔다.</ul><h3 id="시스템의-가용량-예시"><span class="mr-2">시스템의 가용량 예시</span><a href="#시스템의-가용량-예시" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>tomcat worker thread 500으로 설정 API 응답시간이 250ms</p></blockquote><ul><li>이 기준으로 계산해보면 시스템의 최대 TPS 2,000임을 알수 있다.</ul><h3 id="특수한-상황이-생기면"><span class="mr-2">특수한 상황이 생기면?</span><a href="#특수한-상황이-생기면" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>시스템의 thread pool 정보와 api 응답시간 등을 기준으로 서버에서 가용량을 계산해서 HA 구성을 해놓았으면 평상시에는 예상되는 트래픽을 잘 커버할수 있을 것이다.<li>다만 블랙 프라이데이와 같이 특수한 경우에는 이런 예상치를 훨씬 상회하는 트래픽이 유입될수 있음.<li>이런 케이스에서는 가용한 모든 worker thread들이 사용될것이고, 그 이후에 들어오는 request들을 처리하기 위해 worker thead pool에 thread 할당을 요청하지만 가용하지 않아 대기하게 되고 응답시간이 증가하다가 결국 서비스가 불가능한 상태에 이를수 있다.<ul><li>tomcat worker thread 외에도 db connection pool, API 서비스 로직에서 호출하는 api client의 thread pool 가용량도 초과하는 경우 동일한 문제가 발생할 수 있음.</ul></ul><h3 id="어떻게-대응할것인가"><span class="mr-2">어떻게 대응할것인가?</span><a href="#어떻게-대응할것인가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>탄력성(elasticity)을 통한 것이다. 트래픽에 따라서 또는 server metric에 따라 탄력적으로 시스템 처리량이 자동 증가/감소할 수 있다면 위와 같은 문제를 해결할 수 있을 것이다.<li>thread 부족으로 인한 지연시간이 발생하지 않도록 시스템 확장<li>암달의 법칙(Amdahl’s Law)과 건터(Gunther)의 보편적 확장성 모델(Universal Scalability Model)로 설명</ul><h3 id="응답성의-나빠지는것이란"><span class="mr-2">응답성의 나빠지는것이란?</span><a href="#응답성의-나빠지는것이란" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>쇼핑 시스템에서 외부 결제 서비스가 중단되고 모든 사용자의 상품 구매 결제가 실패하는상황, 일반적으로 발생해서는 안되는 상황이다.<li>고품질 사용자 경험을 제공하기 위해서는 응답성에 관심을 기울여야 한다.<ul><li>응답시간이 오래걸리는 API가 있을떄 트래픽이 몰리면 위의 문제처럼 가용한 thread들이 모두 블로킹된 상태에서 계속 요청이 들어오게 되어 결국 서버 전체적으로 문제가 생김.</ul></ul><h3 id="응답성이-나빠지는것을-방지하려면"><span class="mr-2">응답성이 나빠지는것을 방지하려면?</span><a href="#응답성이-나빠지는것을-방지하려면" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>시스템 실패에도 반응성을 유지할 수 있는 능력, 즉 시스템 복원력을 갖추어야 한다.<li>시스템의 기능 요소를 격리해 모든 내부 장애를 격리하고 서비스 독립성을 확보하여 달성할 수 있다.<ul><li>MSA에서 Circuit Breakers 도입하여 장애 격리</ul></ul><h2 id="12-메시지-기반-통신"><span class="mr-2">1.2 메시지 기반 통신</span><a href="#12-메시지-기반-통신" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/resource"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">processRequest</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">RestTemplate</span> <span class="n">template</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RestTemplate</span><span class="o">();</span>
    <span class="nc">ExamplesCollection</span> <span class="n">result</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span>
       <span class="s">"http://example.com/api/resource2"</span><span class="o">,</span>
       <span class="nc">ExamplesCollection</span><span class="o">.</span><span class="na">class</span>
    <span class="o">);</span>
    <span class="o">...</span>
    <span class="n">processResultFurther</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>일반적으로 spring mvc 기반으로 requestMapping을 작성하는 경우 위와 같이 개발을 할것이다.<li>request per thread model을 사용하는것으로 서비스 기술스택/아키텍쳐로 정했다면 사실 문제가 있는것은 아니다.<li>여기서 말하고 싶은 내용은 i/o 효율 관점에서의 이야기라고 보면 좋을것 같다.</ul><p><a href="https://user-images.githubusercontent.com/6982740/173187480-22a5421b-dade-43b8-88de-a4ae9eaefa3e.png" class="popup img-link "><img width="760" alt="스크린샷 2022-06-11 오후 9 14 00" data-src="https://user-images.githubusercontent.com/6982740/173187480-22a5421b-dade-43b8-88de-a4ae9eaefa3e.png" class="lazyload" data-proofer-ignore></a></p><ul><li>위와 같은 request per thread model에서는 i/o를 처리하는 동안 thread가 blocking되어 대기하게 된다. thread A는 blocking된 동안 다른 요청을 처리할 수 없다.<li>Java에서는 병렬 처리를 위해 thread pool을 이용해 추가 스레드를 할당하는 방법이 있지만, 부하가 높은 상태에서는 이러한 기법이 새로운 I/O 작업을 동시에 처리하는데에는 매우 비효율적일 수 있다.</ul><h3 id="비동기-논블로킹-모델asynchronous-and-non-blocking-model"><span class="mr-2">비동기 논블로킹 모델(asynchronous and non-blocking model)</span><a href="#비동기-논블로킹-모델asynchronous-and-non-blocking-model" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://user-images.githubusercontent.com/6982740/173187799-0973becf-52f5-40fe-a4da-62f3fec1f2ee.png" class="popup img-link "><img width="459" alt="스크린샷 2022-06-11 오후 9 23 24" data-src="https://user-images.githubusercontent.com/6982740/173187799-0973becf-52f5-40fe-a4da-62f3fec1f2ee.png" class="lazyload" data-proofer-ignore></a></p><ul><li>위 그림은 사람이 SMS을 처리하는 방식에 대한 내용이다.<li>이 방식이 바로 대표적인 non-blocking 통신 방식이라고 이해할 수 있다.</ul><h3 id="message-driven-통신"><span class="mr-2">message-driven 통신</span><a href="#message-driven-통신" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>자원을 효율적으로 사용하기 위해서는 message-driven 통신원칙을 따라야 한다.<li>이를 수행하는 방법의 하나는 메시지 브로커(message broker)를 사용하는 것이다.<li>메시지 대기열을 관리하여 시스템 부하 관리, 탄력성을 제어할 수 있다.<ul><li>메시지 브로커로 kafka를 사용한다고 했을떄 consumer와 partition수를 니즈에 따라 적절히 셋팅하여 처리량을 조절할 수 있다.</ul></ul><h3 id="리액티브-선언문"><span class="mr-2">리액티브 선언문</span><a href="#리액티브-선언문" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://user-images.githubusercontent.com/6982740/173187907-1c409647-fae9-4311-821c-9704757703db.png" class="popup img-link "><img width="719" alt="7" data-src="https://user-images.githubusercontent.com/6982740/173187907-1c409647-fae9-4311-821c-9704757703db.png" class="lazyload" data-proofer-ignore></a></p><ul><li>모든 비즈니스의 핵심 가치는 응답성이다.<li>응답성을 확보한다는 것은 탄력성 및 복원력 같은 기법을 따른다는 의미이다.<li>탄력성 및 복원력을 확보하는 기본적인 방법의 하나는 메시지 기반 통신을 사용하는 것이다.</ul><h2 id="13-반응성에-대한-유스케이스"><span class="mr-2">1.3. 반응성에 대한 유스케이스</span><a href="#13-반응성에-대한-유스케이스" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://user-images.githubusercontent.com/6982740/173187943-dcdf6e39-a82e-4272-9d2b-cd6116a6aa24.png" class="popup img-link "><img width="628" alt="" data-src="https://user-images.githubusercontent.com/6982740/173187943-dcdf6e39-a82e-4272-9d2b-cd6116a6aa24.png" class="lazyload" data-proofer-ignore></a></p><ul><li>위 그림은 modern micro service pattern을 적용한 웹 스토어 아키텍쳐이다.<li>위치 투명성을 달성하기 위해 api gateway pattern을 사용한다.<li>서비스 요소 일부에 복제본을 구성해 높은 시스템 응답성을 얻을 수 있다.<ul><li>복제본 하나가 중단된 경우에 복원력을 유지할 수 있다.</ul><li>kafka을 이용해 구성한 메시지 기반 통신과 독립적인 결제 서비스 fail-over 처리도 하고 빠른 응답성을 제공한다.<ul><li>실제 주문 처리를 하지 않고 바로 응답할 수 있으므로 thread가 blocking 되는 시간이 줄어든다.<li>다만 transaction이 무조건 보장되어야 하는 케이스라면 위와 같은 비동기 처리방식이 적절하지 않을수 있다. 예를 들면 은행의 계좌이체를 생각했을때 돈이 오고가는데 결과적으로 데이터 일관성이 맞춰지겠으나 시점에 따라 데이터 일관성이 꺠질수 있고, 즉각적으로 fail-over를 할수 없는 상황도 있을수 있다.(상대 은행의 점검시간인 경우 즉시 fail-over하더라도 처리할수 없고 점검이 끝날떄가 되어서야 처리가 이루어질수 있다.)</ul></ul><h3 id="리액티브가-적절한-시스템-분야"><span class="mr-2">리액티브가 적절한 시스템 분야</span><a href="#리액티브가-적절한-시스템-분야" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>애널리틱스(analytics)분야는 엄청난 양의 데이터를 다루면서 런타임에 처리하고 사용자에게 실시간으로 통계를 제공해야 할수도 있는데 이런 케이스에서 리액티브가 효과적일 수 있다.<li>스트리밍(streaming)이라는 효율적인 아키텍쳐를 사용할수 있다.</ul><p><a href="https://user-images.githubusercontent.com/6982740/173188183-b2354ecc-d02d-433f-94ec-a76fdc6f59cb.png" class="popup img-link "><img width="781" alt="" data-src="https://user-images.githubusercontent.com/6982740/173188183-b2354ecc-d02d-433f-94ec-a76fdc6f59cb.png" class="lazyload" data-proofer-ignore></a></p><ul><li>가용성이 높은 시스템을 구축하려면 리액티브 선언문에서 언급한 기본 원칙을 지켜야한다.<ul><li>복원력 확보를 위해 배압 지원 활성화 등</ul></ul><h2 id="14-서비스-레벨에서의-반응성"><span class="mr-2">1.4 서비스 레벨에서의 반응성</span><a href="#14-서비스-레벨에서의-반응성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>큰 시스템은 더 작은 규모의 시스템들로 구성되기 때문에 구성 요소의 리액티브 특성에 의존한다. 즉 리액티브 시스템은 설게 원칙을 저굥ㅇ하고 이 특성을 모든 규모에 저굥ㅇ해 그 구성요소들을 합성할 수 있게 하는것을 의미힌다. (리액티브 선언문 중)</p></blockquote><ul><li>따라서 구성 요소 수준에서도 리액티브 설계 및 구현을 제공하는 것이 중요하다.<li>설게 원칙이란 컴포넌트 사이의 관계, 예를 들면 각 기본 요소를 조합하는 데 사용되는 프로그래밍 기법</ul><h3 id="일반적인-자바의-코드-작성--명령형-프로그래밍imperative-programing"><span class="mr-2">일반적인 자바의 코드 작성 : 명령형 프로그래밍(imperative programing)</span><a href="#일반적인-자바의-코드-작성--명령형-프로그래밍imperative-programing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://user-images.githubusercontent.com/6982740/173188610-e11850eb-4a18-4aec-8f5e-af9afebc830d.png" class="popup img-link "><img width="539" alt="스크린샷 2022-06-11 오후 9 48 40" data-src="https://user-images.githubusercontent.com/6982740/173188610-e11850eb-4a18-4aec-8f5e-af9afebc830d.png" class="lazyload" data-proofer-ignore></a></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">ShoppingCardService</span> <span class="o">{</span>
      <span class="nc">Output</span> <span class="nf">calculate</span><span class="o">(</span><span class="nc">Input</span> <span class="n">value</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">OrdersService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ShoppingCardService</span> <span class="n">scService</span><span class="o">;</span>
    <span class="kt">void</span> <span class="nf">process</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Input</span> <span class="n">input</span> <span class="o">=</span> <span class="o">...;</span>
        <span class="nc">Output</span> <span class="n">output</span> <span class="o">=</span> <span class="n">scService</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">scService.calculate()</code>에서 I/O 작업을 수행한다고 가정했을떄 해당 메소드를 수행하는동안 스레드는 blocking된다. orderService에서 별도의 독립적인 처리를 실행하려면 추가 스레드 할당이 필요하다.(하지만 이러하 방식은 낭비이고 리액티브 관점에 본다면 그렇게 하지 말아야 한다.</ul><h3 id="callback-활용-방식"><span class="mr-2">Callback 활용 방식</span><a href="#callback-활용-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">ShoppingCardService</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">calculate</span><span class="o">(</span><span class="nc">Input</span> <span class="n">value</span><span class="o">,</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">Output</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrdersService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ShoppingCardService</span> <span class="n">shoppingCardService</span><span class="o">;</span>

    <span class="kt">void</span> <span class="nf">process</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Input</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Input</span><span class="o">();</span>
        <span class="n">shoppingCardService</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="n">output</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="o">...</span>
        <span class="o">});</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>실제 자바 코드 관점에서 thread blocking이 발생하기는 하지만 ShoppingCardService로부터 결과를 반환받지않고, OrderService가 작업을 완료 후에 반응할 콜백 함수를 미리 전달하므로 ShoppingCardService로부터 분리(decoupled)됐다고 볼수 있다.</ul><h3 id="thread-사용-방식"><span class="mr-2">Thread 사용 방식</span><a href="#thread-사용-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AsyncShoppingCardService</span> <span class="kd">implements</span> <span class="nc">ShoppingCardService</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculate</span><span class="o">(</span><span class="nc">Input</span> <span class="n">value</span><span class="o">,</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">Output</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// blocking operation is presented, better to provide answer asynchronously</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="n">c</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="k">new</span> <span class="nc">Output</span><span class="o">());</span>
        <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>ShoppingCardService에서 데이터를 처리하고 파라미터로 전달된 Callback function에 그 결과를 전달하여 처리하는 방식<li>이러하 방식의 장점은 컴포넌트가 콜배 함수에 의해 분리된다는것이다.<li>다점이라면 공유 데이터 변경 등 롤백 지옥을 피하기 위헤ㅐ 개발자가 멀티 스레딩을 잘 이해해야 한다.</ul><h3 id="future-사용-방식"><span class="mr-2">Future 사용 방식</span><a href="#future-사용-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ShoppingCardService</span> <span class="o">{</span>
    <span class="nc">Future</span><span class="o">&lt;</span><span class="nc">Output</span><span class="o">&gt;</span> <span class="nf">calculate</span><span class="o">(</span><span class="nc">Input</span> <span class="n">value</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrdersService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ShoppingCardService</span> <span class="n">shoppingCardService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">OrdersService</span><span class="o">(</span><span class="nc">ShoppingCardService</span> <span class="n">shoppingCardService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shoppingCardService</span> <span class="o">=</span> <span class="n">shoppingCardService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">process</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Input</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Input</span><span class="o">();</span>
        <span class="nc">Future</span><span class="o">&lt;</span><span class="nc">Output</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">shoppingCardService</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">shoppingCardService</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" execution completed"</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="o">|</span> <span class="nc">ExecutionException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>Future을 삳용하여 결과값 반환을 지연시킬 수 있다.<li>Future을 이용하면 멀티 스레드의 복잡성을 숨길 수 있지만 어쩃든 필요한 결과를 얻으려면 현재 스레드를 블로킹시키는 방식으로 처리해야만 한다. 그래서 이는 확장성을 현저히 저하시킬 수 있다.</ul><h4 id="completablefuture-사용-방식"><span class="mr-2">CompletableFuture 사용 방식</span><a href="#completablefuture-사용-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ShoppingCardService</span> <span class="o">{</span>
    <span class="nc">CompletionStage</span><span class="o">&lt;</span><span class="nc">Output</span><span class="o">&gt;</span> <span class="nf">calculate</span><span class="o">(</span><span class="nc">Input</span> <span class="n">value</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrdersService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ShoppingCardService</span> <span class="n">shoppingCardService</span><span class="o">;</span>

    <span class="kt">void</span> <span class="nf">process</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Input</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Input</span><span class="o">();</span>

        <span class="n">shoppingCardService</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="n">input</span><span class="o">)</span>
                           <span class="o">.</span><span class="na">thenAccept</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">shoppingCardService</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" execution completed"</span><span class="o">));</span>
       <span class="o">...</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>Future와 비슷하지만 반환된 결과를 기능적 선언 방식으로 처리할 수 있다.<li>이를 통해함수형 스타일 또는 선언형 스타일로 코드를 작성할수 있고 결과를 비동기적으로 처리할 수 있게 되었다.</ul><h3 id="completablefuture-등의-문제점"><span class="mr-2">CompletableFuture 등의 문제점</span><a href="#completablefuture-등의-문제점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>위와 같은 방식은 비동기 처리를 가능하게 하지만 Spring 자체에서 i/o와 같은 블로킹 네트워크 호출을 모두 별도의 스레드로 래핑해서 처리하기 떄문에 비효율적인 방식이다.</ul><blockquote><p>Spring5에서 큰변화가 있었던 이유는 기존 Spring에서는 서블릿 3 API에 포함된 대부분의 비동기 논블로킹 기능이 잘 통합되어있었으나 Spring MVC 자체가 비동기 논블로킹 클라이언트를 제공하지 않음으로써 개선된 서블릿 API의 이점을 무효로 만들었기 떄문에 많은 부분에서 변화가 생겼다.</p></blockquote><ul><li>자바의 기본적인 멀티 스레딩 모델은 몇몇 스레드가 그들의 작업을 동시에 실행하기 위해 하나의 CPU를 공유할수도 있다고 가정했다.<li>이말은 즉 CPU 시간이 여러 스레드간에 공유되는것이고 이러한 처리를 위해 컨텍스트 스위칭(context switching)이 필연적으로 발생한다.<ul><li>스레드 컨택스트를 변경할때 레지스터, 메모리 맵 및 기타 관련요소를 저장하거나 불러오는 행위가 필요하다.</ul><li>스레드 개수의 제한적인 요소는 일반적인 스레드 사이즈인 1MB를 기준으로 생각해볼때 request per thread model에서 64,000개의 동시성을 제공하려면 64GB의 메모리가 필요하다는 사실이다.</ul><h3 id="리액티브-파이프라인"><span class="mr-2">리액티브 파이프라인</span><a href="#리액티브-파이프라인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://user-images.githubusercontent.com/6982740/173189750-e5a13bc9-298c-46bf-a44a-5b881a00ce90.png" class="popup img-link "><img width="787" alt="스크린샷 2022-06-11 오후 10 21 29" data-src="https://user-images.githubusercontent.com/6982740/173189750-e5a13bc9-298c-46bf-a44a-5b881a00ce90.png" class="lazyload" data-proofer-ignore></a></p><ul><li>비동기 처리는 일반적인 요청-응답 패턴에만 국한되지 않는다.<li>떄로는 데이터의 연속적인 스트림으로 처리해야 할수도 있고, 정렬된 변환 흐름으로 처리해야 하는 ㄴ경우도 있을수 있다.</ul><h3 id="마치며"><span class="mr-2">마치며</span><a href="#마치며" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>책의 내용을 읽고 정리하는 과정에서 느낀 부분은 주로 기존 Spring MVC의 request per thread model의 한계점에 대해 이해하고, webflux 이전 비동기 처리를 어떻게 제공했는지 이 방식에서의 한계점에 대해 간략히 다루는 내용이었습니다.<li>데이터 소스 레벨까지 리액티브가 가능하다면 이를 사용해서 스레드를 효율적으로 사용할수 있다면 베스트일것이라 생각합니다. 다만 아직 r2dbc와 같은 DB 리애틱브 드라이버가 완벽히 성숙단계에 이른것은 아니므로 RDB로 서비스하는 경우라면 기술 선정에 좀 신중을 가할 필요가 있을것이라 생각됩니다.<li>반대로 redis, mongodb 등 reactive를 잘 지원할수 있는 스토리지를 사용한다면 reactive를 도입해서 서버의 자원 효율을 증대시키는것도 좋은 방법이라 생각됩니다!</ul><h2 id="reference"><span class="mr-2">Reference</span><a href="#reference" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://www.packtpub.com/product/hands-on-reactive-programming-in-spring-5/9781787284951">Hands-On Reactive Programming in Spring 5</a><li><a href="https://github.com/PacktPublishing/Hands-On-Reactive-Programming-in-Spring-5">https://github.com/PacktPublishing/Hands-On-Reactive-Programming-in-Spring-5</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devlog/'>DevLog</a>, <a href='/categories/spring/'>Spring</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a> <a href="/tags/spring/" class="post-tag no-text-decoration" >Spring</a> <a href="/tags/hands-on-reactive-programming-in-spring-5/" class="post-tag no-text-decoration" >Hands-On Reactive Programming in Spring 5</a> <a href="/tags/reactive/" class="post-tag no-text-decoration" >Reactive</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Hands-On%20Reactive%20Programming%20in%20Spring%205]%201.%20%EC%99%9C%20%EB%A6%AC%EC%95%A1%ED%8B%B0%EB%B8%8C%20%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%B8%EA%B0%80?%20-%20Sungsu's%20Tech%20Blog&url=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fspring5-reactive-programing-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Hands-On%20Reactive%20Programming%20in%20Spring%205]%201.%20%EC%99%9C%20%EB%A6%AC%EC%95%A1%ED%8B%B0%EB%B8%8C%20%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%B8%EA%B0%80?%20-%20Sungsu's%20Tech%20Blog&u=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fspring5-reactive-programing-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fsungsu9022.github.io%2Fposts%2Fspring5-reactive-programing-1%2F&text=[Hands-On%20Reactive%20Programming%20in%20Spring%205]%201.%20%EC%99%9C%20%EB%A6%AC%EC%95%A1%ED%8B%B0%EB%B8%8C%20%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%B8%EA%B0%80?%20-%20Sungsu's%20Tech%20Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/es-bible-4-3/">[엘라스틱서치 바이블] 4. 데이터 다루기 -3(ES Client 라이브러리)</a><li><a href="/posts/es-bible-4-2/">[엘라스틱서치 바이블] 4. 데이터 다루기 -2(집계)</a><li><a href="/posts/es-bible-2/">[엘라스틱서치 바이블] 2. 엘라스틱 서치 기본 동작과 구조</a><li><a href="/posts/es-bible-3-1/">[엘라스틱서치 바이블] 3. 인덱스 설계 - 1</a><li><a href="/posts/spark-guide-6/">[스파크 완벽 가이드] 6. 다양한 데이터 타입 다루기</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/kubernetes-in-action/">kubernetes-in-action</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/elasticsearch/">Elasticsearch</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/hands-on-reactive-programming-in-spring-5/">Hands-On Reactive Programming in Spring 5</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/spring5-reactive-2/"><div class="card-body"> <em class="small" data-ts="1655526480" data-df="ll" > Jun 18, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Hands-On Reactive Programming in Spring 5] 2. 스프링을 이용한 리액티브 프로그래밍 기본 개념</h3><div class="text-muted small"><p> 2. 스프링을 이용한 리액티브 프로그래밍 기본 개념 관찰자 패턴 스프링 서버에서 보낸 이벤트를 구현한 발행-구독(Publish-Subscribe) 구현 RxJava 역사 및 기본 개념 마블(Marble) 다이어그램 리액티브 프로그래밍을 적용한 비즈니스 사례 리액티브 라이브러리의 현재 상황 2.1 리액티브를 위한 스프링 프레임워크의 초기 해법 ...</p></div></div></a></div><div class="card"> <a href="/posts/spring5-reactive-9/"><div class="card-body"> <em class="small" data-ts="1658809680" data-df="ll" > Jul 26, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Hands-On Reactive Programming in Spring 5] 9. 리액티브 애플리케이션 테스트하기</h3><div class="text-muted small"><p> 9. 리액티브 애플리케이션 테스트하기 테스트 도구에 대한 요구사항 StepVerifier를 사용해 Publisher를 테스트할 때의 핵심 고급 StepVerifier 사용 시나리오 웹플럭스 테스트를 위한 툴 세트 9.1 리액티브 스트림을 테스트하기 어려운 이유 대규모 시스템에 많은 수의 클래스가 포함된 수많은 컴포넌트가 ...</p></div></div></a></div><div class="card"> <a href="/posts/devlog-spring-boot-application/"><div class="card-body"> <em class="small" data-ts="1588264440" data-df="ll" > May 1, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Boot + JPA + H2 Application 간단하게 띄우기</h3><div class="text-muted small"><p> Spring Boot + JPA + H2 Application 간단하게 띄우기 1. 프로젝트 만들기 2. 애플리케이션 기본 설정 3. Web MVC Configuration 4. JSP Configration 5. JPA Configration 1. 프로젝트 만들기 1.1 spring initializr을 통해 프로젝트 뼈대 만...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/devlog-platform-kubernetes-in-action11/" class="btn btn-outline-primary" prompt="Older"><p>[kubernetes-in-action] 11. 쿠버네티스 내부 이해</p></a> <a href="/posts/spring5-reactive-2/" class="btn btn-outline-primary" prompt="Newer"><p>[Hands-On Reactive Programming in Spring 5] 2. 스프링을 이용한 리액티브 프로그래밍 기본 개념</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://sungsu9022.github.io/posts/spring5-reactive-programing-1/'; this.page.identifier = '/posts/spring5-reactive-programing-1/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://sungsu-parks-tech-blog.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] } ); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } if (document.querySelector('.mode-toggle')) { window.addEventListener('message', reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/kubernetes-in-action/">kubernetes-in-action</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/elasticsearch/">Elasticsearch</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/hands-on-reactive-programming-in-spring-5/">Hands-On Reactive Programming in Spring 5</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/sungsu9022dev">sungsu9022</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-145894105-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-145894105-1'); }); </script>
